<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>Archives: 2024 | 氕氘氚</title>
    <meta name="keywords" content="hexo,theme,otakism,otaku"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="google-site-verification" content=""/>
    <meta name="baidu-site-verification" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Open your eyes to see the light in life">
<meta property="og:type" content="website">
<meta property="og:title" content="氕氘氚">
<meta property="og:url" content="https://szczecin.github.io/archives/2024/index.html">
<meta property="og:site_name" content="氕氘氚">
<meta property="og:description" content="Open your eyes to see the light in life">
<meta property="og:locale">
<meta property="article:author" content="Szczecin">
<meta name="twitter:card" content="summary">
    

    <!-- Favicon -->
    
        <link rel="icon" href="/img/favicon.ico" />
    

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,700" rel="stylesheet">

    
<link rel="stylesheet" href="/style.css">

    <script>
      function setLoadingBarProgress(num) {
        document.getElementById('loading-bar').style.width = num + "%";
      }
    </script>

    


<meta name="generator" content="Hexo 6.2.0"></head>

<body>

<div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>

<script>setLoadingBarProgress(20)</script>

<div id="site-wrapper">

    <header id="header">
    <div id="header-wrapper" class="clearfix">
        <a id="logo" href="/">
            <img src="/img/logo.png"/>
            <span id="site-desc">
                Be A Gorgeous World
            </span>
        </a>
        <button id="site-nav-switch">
            <span class="icon icon-menu"></span>
        </button>
    </div>
</header>
    <script>setLoadingBarProgress(40);</script>

    <main id="main" role="main">
        
    


  <section class="page-header archive">
    <h1>- <span>2024</span> -</h1>
  </section>




<section class="post-list">
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/07/30/Trip-Japan/">
                霓虹旅行（Trip Japan）
            </a>
        </h2>
    
    <time>
        Jul 30, 2024
    </time>
    <section class="content">
        <h1><span id="霓虹旅行">霓虹旅行</span></h1><blockquote>
<p><del>2024.9.26（25）-10.3（4）</del></p>
<p>2024.9.25 - 10.3</p>
</blockquote>
<h2><span id="证件">证件</span></h2><blockquote>
<p>护照：2024.7.16</p>
<p>签证：2024.8.9 - 8.20</p>
<p>身份证（虽然没用还是带吧）</p>
<p>护照、身份证及电子件</p>
<p>住宿行程单（中文、日语及英语？）</p>
<p>Visit Japan Web 入境卡</p>
</blockquote>
<h2><span id="行李">行李</span></h2><blockquote>
<p>手机、电话卡、充电器、充电宝（不需要变压器，也应该没有什么用电的其他东西）</p>
<p>衣物3-4套（看大连人穿啥？）</p>
<p>现金、信用卡</p>
<p>垃圾袋小卷 + 小布包</p>
<p>雨伞</p>
<p>洗浴品一点点</p>
<p>刮胡刀</p>
</blockquote>
<h2><span id="安全">安全</span></h2><blockquote>
<p>中国驻日本领事馆 Tel：03-3403-3388 </p>
<p>开通国际长途&#x2F;漫游</p>
<p>电话这里有一个坑，如果是外省工作的小伙伴，用的是其他省发的电话卡，如果是老卡，是无法在工作省直接线上办理国际长途&#x2F;漫游的，线下办理也会需要你回发卡省，其实出国不能打电话还好，但是可能会收不到短信验证码，这个我朋友的解决办法是买一个国际最便宜的流量包（如电信日本10元&#x2F;100MB），他就会帮你开通短信服务，这个要过去再试验一下</p>
<p>保证手机和充电宝电量充足</p>
<p>每天回到酒店一定要充电，出去玩随身一定要带好证件、充电宝、充电器、伞、现金</p>
<p>国内联系</p>
<p>不时和国内家人或朋友联系，我甚至在 Github 上建了一个 repository，更新自己的情况（互联网传输协议比电话通讯可靠的一集）</p>
</blockquote>
<h2><span id="有用的site">有用的Site</span></h2><h3><span id="机票">机票</span></h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.tianxun.com/transport/flights/csha/osaa/240926/241003/?adultsv2=2&cabinclass=economy&childrenv2=&ref=home&rtn=1&preferdirects=true&outboundaltsenabled=false&inboundaltsenabled=false">天巡</a></p>
<p>Tips：其实我从很早就开始看机票，在离预定出发两个月前的时间，有东航浦东出发（1864）的机票，因为7月中旬才办护照，要8月初才到所以错过；</p>
<p>后来不得已在距出发时间一个半月左右的8月中旬，买了萧山出发厦航（2438），虽然这个时候还是上海春秋便宜（1700-1800），但是如果算行李额、来回高铁费用时间、餐点、出发和到达时间等，感觉不值</p>
<p><img src="/2024/07/30/Trip-Japan/90.png" alt="img"></p>
</blockquote>
<h3><span id="天气amp活动">天气&amp;活动</span></h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://weathernews.jp/">ウェザーニュース-气象新闻公司</a></p>
<p><a target="_blank" rel="noopener" href="https://support.apple.com/zh-cn/105038">Apple Weather</a></p>
<p><a target="_blank" rel="noopener" href="https://www.agoda.cn/?cid=-42&ds=JfOXGp9RnfLz6+ez">agoda-景点及车票</a> （无法银联、国内VISA付款了）</p>
<p><a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/kansai/">关西-日本国家旅游局</a></p>
</blockquote>
<h3><span id="门票amp预定">门票&amp;预定</span></h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.agoda.cn/?cid=-42&ds=JfOXGp9RnfLz6+ez">agoda-景点及车票</a></p>
<p>虽然各个景点都有官方售票站点，但是 Agoda 一般更便宜些，以下记录均为官方站点与官方票价（无法银联、国内VISA付款了）</p>
<p><a target="_blank" rel="noopener" href="https://www.klook.com/zh-CN/">klook-客路</a> 最好去国内下单，比直接日元更便宜</p>
<p>kkday 我强烈怀疑agoda就是调用的这家接口，钱付出去订单确定了一小时后还能和你说对不起取消了，然后钱过一段时间原路返回&#x3D; &#x3D;</p>
<p><a target="_blank" rel="noopener" href="https://www.osakacastle.net/guide/">大阪城 - 600 JPY</a> 9:00-17:00</p>
<p><a target="_blank" rel="noopener" href="https://www.expo70-park.jp/languages/chinese/">萬博紀念公園 - 230 JPY</a> 9:30-17:00</p>
<p><a target="_blank" rel="noopener" href="https://www.skybldg.co.jp/en/#s-ticket">梅田空中庭園 - 2000 JPY</a> 9:30-22:30</p>
<p><a target="_blank" rel="noopener" href="https://www.tsutenkaku.co.jp/annai/index.html#">通天閣 - 1000 JPY</a> 10:00-20:00</p>
<p><a target="_blank" rel="noopener" href="https://www.asoview.com/channel/ticket/Dv7JtrMOTG/ticket0000021516">Harukas300展望台 - 2000 JPY</a> 9:00-22:00</p>
<p><a target="_blank" rel="noopener" href="https://www.kaiyukan.com/language/eng/ticket.html">海遊館 - 2700 JPY</a> 9:30 - 20:00</p>
<p><a target="_blank" rel="noopener" href="http://tempozan-kanransya.com/tempozan-kanransya.com/zh-CN/">天保山大摩天輪 - 900 JPY</a> 10:00 - 22:00</p>
<p><a target="_blank" rel="noopener" href="https://www.todaiji.or.jp/zh/information/haikan/">東大寺 - 800&#x2F;1200 JPY</a> 7:30 - 17:30 但实际上不进去展览馆之类的应该不需要门票钱，线上好像无法直接售票</p>
<p><a target="_blank" rel="noopener" href="https://www.kasugataisha.or.jp/EN/about_en/basic/">春日大社 - 500&#x2F;1500 JPY</a> 6:30 - 17:30 但实际上不进去展览馆主殿之类的应该不需要门票钱，线上好像无法直接售票</p>
<p><a target="_blank" rel="noopener" href="https://www.tenryuji.com/cn/visit/">天龍寺 - 500&#x2F;1300 JPY</a> 8:30 - 17:00 但实际上不进去主殿诸堂之类的应该不需要门票钱，线上好像无法直接售票</p>
<p><a target="_blank" rel="noopener" href="https://www.sagano-kanko.co.jp/sc/ticket/">嵯峨野観光鉄道トロッコ列車 - 1960 JPY</a> 9:00 - 17:00</p>
<p><a target="_blank" rel="noopener" href="https://e-tix.jp/kyotomm/en/">京都國際漫畫博物館 - 1200 JPY</a> 10:00 - 17:00</p>
</blockquote>
<h2><span id="有用的app">有用的APP</span></h2><blockquote>
<p>DeepL —— 拍照翻译（后来用 Apple 自带的翻译了）</p>
<p>Google Map —— 地图导航、找吃的、找住的近的地方、找景点位置和大致距离</p>
<p>Apple Map —— 补充交通票细节和一些没有的线路</p>
<p>手写日语输入 —— 不会打日语，很多菜单是手写体，拍照翻译效果很差，要用手写日语输入后进行翻译</p>
<p>Suica&amp;Apple Pay —— <del>有信用卡后好像可以移动支付了，不需要去充实体卡了</del></p>
<p>交通卡这里有个大坑，首先，Suica的实体卡在关西好像线下无售，能买到的是ICOCA，使用范围和Suica差不多，但是我不推荐买实体Suica或者ICOCA卡，因为你很有可能无法电子充值</p>
<p>ICOCA是官网指明了不能信用卡充值，Suica你也无法用银联或者国内银行开具的VISA充值，我采用的方式是 Apple Pay（这里很建议出国的小伙伴用iPhone），这是我实验下来唯一能电子充值的办法：</p>
<p>不需要更改国家地区，不需要下载Suica的APP，你只需要打开Apple Pay，绑定一张普通的储蓄卡（普卡），然后点击交通卡 - Suica，往里添加1000JPY，能成功，理论上就能在日本用了</p>
<p><a target="_blank" rel="noopener" href="https://cn.unionpay.com/upowhtml/cn/templates/newInfo/7885004da382485e8bde5a0ba000fdd3/20210222170736.html#:~:text=%E7%8E%B0%E5%9C%A8%E9%93%B6%E8%81%94%E5%8D%A1%E6%8C%81%E5%8D%A1%E4%BA%BA%E5%8F%AA%E9%9C%80%E5%9C%A8Apple%E9%92%B1%E5%8C%85%E5%86%85%E5%9C%A8%E7%BA%BF%E7%94%B3%E8%AF%B7Suica%E5%8D%A1%EF%BC%8C%E5%8D%B3%E5%8F%AF%E9%80%89%E6%8B%A9%E9%93%B6%E8%81%94%E5%8D%A1%E5%90%91%E5%85%B6%E5%85%85%E5%80%BC%EF%BC%8C%E5%9C%A8%E6%97%A5%E6%9C%AC%E7%94%B5%E8%BD%A6%E3%80%81%E5%B7%B4%E5%A3%AB%E3%80%81%E5%9C%B0%E9%93%81%E3%80%81%E6%96%B0%E5%B9%B2%E7%BA%BF%E7%AD%89%E5%A4%9A%E7%A7%8D%E4%BA%A4%E9%80%9A%E8%AE%BE%E6%96%BD%E5%86%85%E6%97%A0%E9%9A%9C%E7%A2%8D%E4%BD%BF%E7%94%A8%E3%80%82,%E6%AD%A4%E5%89%8D%EF%BC%8C%E6%97%A5%E6%9C%AC%E5%8F%A6%E4%B8%80%E5%A4%A7%E4%BA%A4%E9%80%9A%E5%8D%A1Pasmo%E4%B9%9F%E5%B7%B2%E9%80%9A%E8%BF%87Apple%20Pay%E5%BC%80%E9%80%9A%E9%93%B6%E8%81%94%E5%8D%A1%E5%9C%A8%E7%BA%BF%E5%85%85%E5%80%BC%E6%9C%8D%E5%8A%A1%E3%80%82">银联卡持卡人可通过Apple Pay线上充值日本交通卡 - 20210222</a></p>
<p>但是我自己的实操是：银联信用卡可以添加进 Apple Pay，国内银行开具的VISA不行，且Suica的APP也不认银联信用卡作为充值方式，但是！用储蓄卡可以，通过添加储蓄卡在Apple Pay然后添加Suica卡在Apple Pay，可以充值，不需要现金和实体卡，有点逆天了……（这个之后我会在日本再试试看，实在不行还是需要现金充值）</p>
</blockquote>
<h2><span id="预估花费">预估花费</span></h2><blockquote>
<p>护照费用：130 RMB</p>
<p>签证费用：155 RMB</p>
<p>机票费用：2438 RMB</p>
<p><del>新干线（大阪-东京）：700 x4</del></p>
<p>现金：3-4w JPY？（1500-2000 RMB）</p>
<p>电话卡：85 RMB</p>
<p>住宿费用：43513 JPY - 39.5 USD + 29165 JPY 约等于 3267.99 RMB</p>
<p>最小漫游包：10 RMB</p>
<p><del>大阪地鐵巴士乘車券 1日：820 JPY（用于9.28）</del>有点坑，急行和延长线不让坐，还不让退，结论是小亏了</p>
<p>京都觀光乘車券 1日：700 JPY（用于9.30）属于是没啥赚头</p>
<p>JR 關西廣域鐵路周遊券 5日（12000 JPY），可以去天桥立，并且能从去奈良那天就开始用，但到奈良的地方不是很好（站和奈良公园有一点点距离），奈良去京都也能用，伏见去宇治也能用，最后京都回大阪关西机场也能用，算是小赚，但需要记得用周游券在绿色换票机换票和预约，尤其是预约线路，不知道能不能提前预约后面几天的，详见<a target="_blank" rel="noopener" href="https://www.westjr.co.jp/global/sc/howto/ticket-vending-machine/">绿色换票机</a></p>
<p>这里要说一句，还有一个關西鐵路卡2日（5600 JPY），之前是 4000 JPY，能满足我从大阪到神户神户回大阪大阪去奈良奈良到京都的需要，但是9.28-29两天的通行加起来大概 4000 JPY，很可惜</p>
</blockquote>
<h2><span id="支付方式">支付方式</span></h2><blockquote>
<p>交通：Suica —— JR、地铁、电车、公交</p>
<p>便利店：Alipay、Wechat、VISA</p>
<p>小吃：现金</p>
<p>机票酒店：VISA、银联</p>
<p>Tips：极其建议去境外旅游的朋友办理信用卡，合理使用，清款后可以注销，因为包括机票、酒店、景点的提前预定尤其是线上支付，可能只认信用卡，即使PayPal也需要绑定信用卡支付</p>
<p>从个人实际来看，如果你确定满足签证条件（大把握能过），提前两个月订机票和酒店是无比合适的，价格更低，更有余量，而机票可能能用Wechat&#x2F;Alipay直接买下，酒店是只能国际信用卡（银联看情况是否能使用）才可以提前好久预定不支付且长时间免费退订的，用Wechat&#x2F;Alipay会强制要求直接支付，所以建议办理信用卡</p>
<p><img src="/2024/07/30/Trip-Japan/91.png" alt="img"></p>
</blockquote>
<h2><span id="景点选择">景点选择</span></h2><blockquote>
<p><img src="/2024/07/30/Trip-Japan/70.jpg" alt="img"></p>
<p>此图为景点的相对位置，比例尺为1:20公里（见右下角），下列景点中“√”为大概率前往，“-”为许可内便顺路前往，“x”为暂定不前往</p>
</blockquote>
<h3><span id="大阪-osaka"></span></h3><blockquote>
<h4><span id="难波-nanba">难波 Nanba (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/1.jpg" alt="難波"></p>
<p>大阪的市中心商业街，是大阪市最繁荣的地方，集美食、娱乐及购物于一身，其覆盖范围之大足够逛一整天，包括道顿堀、心斋桥、戎桥筋、千日前、美国村、南船场等。</p>
<h5><span id="戎桥筋">戎桥筋 (√)</span></h5><p><img src="/2024/07/30/Trip-Japan/2.jpg" alt="戎桥筋"></p>
<p>难波区的娱乐地带，有电影院、游艺中心等，同时有服饰、美妆等商店。对于美食爱好者而言，则必需品尝大阪 りくろ(Rikuro) 老爷爷起司蛋糕和551蓬莱肉包。</p>
<h5><span id="千日前道具街">千日前道具街 (√)</span></h5><p><img src="/2024/07/30/Trip-Japan/3.jpg" alt="千日前道具街"></p>
<p>各种商店都有，但以餐具为主。这儿的餐具做工非常精细，款式极多，不但能找到值得收藏的餐具，更是挑选伴手礼或礼物的好地方。著名的餐厅如美津大阪烧、一兰拉面亦在此。</p>
<h5><span id="美国村-x">美国村 (x)</span></h5><p><img src="/2024/07/30/Trip-Japan/4.jpg" alt="American Village (美国村)"></p>
<p>对于喜欢古着和二手衣服的人，美国村是你的必到之处。这儿有非常多古着店，价格比东京便宜，而且二手衣服的种类很多，又保存得非常好，完全看不出是二手的。此外，这儿亦有很多潮流特色品牌，如Vancy, F t F, TreFac Style, KINJI (in Big Step), FLYING TIGER COPENHAGEN, OPA, Uncle Sam，是年轻人喜欢流连的地方。这儿的装潢明显与其他街道不同，充满美国风情，更可以找到自由神像呢﹗</p>
</blockquote>
<blockquote>
<h4><span id="心斋桥-shinsaibashisuji">心斋桥 Shinsaibashisuji (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/5.jpg" alt="心斋桥 Shinsaibashisuji"></p>
<p>心斋桥和道顿堀是大版最有名的商店街，两者相连形成长长的购物大道。心斋桥以购物商店为主，从药妆如松本清、SUN DRUG、大创 DAISO，便宜服饰如ARA、H&amp;M、UNIQLO、FOREVER 21到知名品牌都应有尽有。其中「大丸松阪屋百货」有很多受日本年轻人喜爱的品牌，如WEGO、GU、Desigual、Lowrys Farm、Lowrys Farm。喜欢时装的人绝都不能错过。</p>
</blockquote>
<blockquote>
<h4><span id="道顿堀商店街-shinsaibashi-suji">道顿堀商店街 Shinsaibashi-Suji (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/6.jpg" alt="道顿堀商店街"></p>
<p>道顿堀是难波区的美食街，这儿云集了日本各县市的经典美食，如大阪烧、章鱼烧、拉面、蟹肉料理。当中推荐美食有：四天王拉面、たこ家道顿堀くくる(明石烧)、蟹道乐和Pablo 半熟起司蛋糕。</p>
<p>记得在社交平台常见的跑人与街口会动的大螃蟹招牌吗？这个著名的拍照景点就在道顿堀荣桥旁的奔跑的固力果(Glico)。除了这个跑人，河岸两旁是各大霓虹广告，入夜后倒映在运河上，形成一波波紫色、红色、蓝色交替的彩光，份外漂亮。这儿亦有各大夜店和娱乐场所，可谓越夜越精彩。</p>
</blockquote>
<blockquote>
<h4><span id="大阪环球影城-universal-studios-x2fx">大阪环球影城 Universal Studios (-&#x2F;x)</span></h4><p><img src="/2024/07/30/Trip-Japan/7.jpg" alt="大阪环球影城 universal studio"></p>
<p>著名的环球影城是到大阪必不可错过的景点。尽管门票贵得惊人，但能一睹小小兵的可爱面目，笔者觉得值回票价。</p>
<p><img src="/2024/07/30/Trip-Japan/8.jpg" alt="大阪环球影城 universal studio"></p>
<p>大阪的环球影城特色是「哈利波特」和「小小兵乐园」。全亚洲只有这儿有哈利波特乐园，整个活米村场景简直是完美复制和呈现。至于「小小兵乐园」，自2017年4月开幕以来，一直是这儿最热门的园区。这儿有不少电影中的可爱场景供拍照用，餐厅和小食店出售很多小小兵造型的食物，而且周边商品极多，如文具、杯子、娃娃，其中最受欢迎的商品必定是小小兵爆米花桶。如果你运气好，会不时碰到在园区内随处出没的真人版小小兵，造型不一；加上小小兵游行，绝对会让小小兵粉丝疯狂。</p>
<p><img src="/2024/07/30/Trip-Japan/9.jpg" alt="大阪环球影城 universal studio"></p>
<p>由于环球影城的人气高企，每项游戏的排队时间长达1-3小时不等，所以建议大家出发前先在网上购买快速通关券，这样便可以缩短哈利波特禁忌之旅、小小兵疯狂乘车游、飞天翼龙、蜘蛛人惊魂历险记4K3D、大白鲨®、侏罗纪公园乘船游™等多项游乐设施的等候时间。</p>
</blockquote>
<blockquote>
<h4><span id="黑门市场-kuromon-market">黑门市场 Kuromon Market (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/10.jpg" alt="Kuromon Market (黑門市場)"></p>
<p>黑门市场是海鲜批发市场，是继道顿堀外另一个美食集中地，两者相距约10分钟。这儿的海鲜特产包罗万有，来自日本不同地方，连和牛、著名的水果都有。由于价钱相宜，深受当地日本人欢迎。推荐几间笔者喜欢的餐厅供大家参考：みな美(河豚)、丸善食肉店(和牛铁板料理)、まぐろや黒银(黑鲔鱼)、山田さんち(无骨鸡翼)、鱼福(扇贝)、鲜鱼川崎(鲷鱼和松叶蟹)。</p>
<p>黑门市场的营业时间为早上九点。由于人潮众多，建议大家早点前来觅食。</p>
</blockquote>
<blockquote>
<h4><span id="大阪城-osaka-castle">大阪城 Osaka Castle (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/11.jpg" alt="大阪城 Osaka Castle"></p>
<p>和名古屋城、熊本城并列日本三大名城的「大阪城」位于大阪城公园，当中的景点包括「西之丸庭园」和「大阪城天守阁」。前者是大阪的赏樱名胜之一，其他季节还可以欣赏枫叶和银杏。可惜笔者到访之时正值夏季转秋，无缘一睹繁花似锦的景象。</p>
<p><img src="/2024/07/30/Trip-Japan/12.jpg" alt="大阪城 Osaka Castle"></p>
<p>「大阪城天守阁」早于1585年便已建成，但后来于战争中被烧毁。现存的天守阁建于80年前，主要展现丰臣秀吉时代的建筑特式和历史，如著名的大坂夏季之战。在天守阁的顶楼还可以眺望大阪市的景色。天守阁的门票为600日元，持周游卡可以免费进场。如果你对历史深感兴趣，可以抽空到附近的大阪历史博物馆逛逛。</p>
</blockquote>
<blockquote>
<h4><span id="大阪梅田空中庭园-kuchu-teien-observatory">大阪梅田空中庭园 Kuchu Teien Observatory (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/13.jpg" alt="大阪梅田空中庭园 Kuchu Teien Observatory"></p>
<p>梅田是大阪的购物区，这儿有非常多大型百货商场，如阪急百货、阪神百货、GRAND FRONT、LUCUA、伊势丹、大丸百货、HEP FIVE、大阪梅田地下街，充满时尚潮流服饰。</p>
<p><img src="/2024/07/30/Trip-Japan/14.jpg" alt="大阪梅田空中庭园"></p>
<p>從梅田車站姐地下道走到藍天大廈空中庭園展望台，你可以從73公尺的高處、360度零死角地欣賞大阪的景色，是看夜景的好地方。晚上的展望台滿佈燈飾，35至39樓有人造的星空隧道，平台有愛心鎖，很適合情侶拍拖。</p>
</blockquote>
<blockquote>
<h4><span id="天王寺及阿倍野地区-tennoji-ward-amp-abeno-ward">天王寺及阿倍野地区 Tennoji Ward &amp; Abeno Ward (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/15.jpg" alt="天王寺及阿倍野地区 Tennoji Ward &amp; Abeno Ward"></p>
<p>除了难波、心斋桥和道顿堀，大阪另一个购物和美食天堂便是天王寺和阿陪野。这儿有三家不同价位的百货公司：免税商店集中地「天王寺MIO」(Tenoji MIO)、小资之选「阿倍野Q’s MALL」(Abeno Q’s MALL)及名牌天堂「倍野近铁百货」(Abeno Harukas）。</p>
<p>除了购物，天王寺一带还有不少值得逛逛地方，如日本最古老的佛寺四天王寺，每月的21日都会有「大师会」，到处都是露天市集和摊档。还有适合亲子游的天王寺动物园、拥有超美夜景的阿倍野HARUKAS 300 观景台，站在展望台上，整个大阪的景色都一览无遗。</p>
</blockquote>
<blockquote>
<h4><span id="新世界及通天阁-shinsekai-amp-tsutenkaku">新世界及通天阁 Shinsekai &amp; Tsutenkaku (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/16.jpg" alt="新世界及通天阁 Shinsekai &amp; Tsutenkaku"></p>
<p>「新世界」曾经是大阪最繁荣的地区，亦是大阪的商业中心。这个地区的地标是由设计东京铁塔的建筑师内藤多仲设计的「通天阁」，连着大大的河豚气球在天空飘浮，非常醒目。自从道顿堀开发后，新世界便慢慢没落。幸得政府近年积极发展，才令这一带再次回复生气。</p>
<p>昔日的新世界是庶民集中地，因此這兒的美食、餐廳及娛樂設施都是庶民價錢，味道卻不比大餐廳差。筆者曾在這兒吃過非常好吃的大阪燒和章魚燒，價格相宜。加上這兒有很多便宜的旅館，對於預算有限的旅人而言，新世界是個不錯的住宿選擇。</p>
</blockquote>
<blockquote>
<h4><span id="大阪今昔馆-osaka-museum-of-housing-and-living-x">大阪今昔馆 Osaka Museum of Housing and Living (x)</span></h4><p><img src="/2024/07/30/Trip-Japan/17.jpg" alt="大阪今昔馆 Osaka Museum of Housing and Living"></p>
<p>邻近天神桥筋商店街的大阪今昔馆是日本首间以大阪住宅和生活为主题的博物馆，重现了江户时代后期的生活原貌，是亲子旅游和下雨天的好去处。 10楼是观景台，可以由此俯瞰江户大阪，而 8楼和9楼是今昔馆展区。 8楼展示了初代通天阁等江户时代的模型，9楼则是可以穿着和服体验江户时代后期的生活，逛逛当时的商店，在街道上留影等。</p>
</blockquote>
<blockquote>
<h4><span id="天然温泉浪速之汤-tennen-onsen-naniwa-no-yu-x">天然温泉浪速之汤 Tennen Onsen Naniwa-no-yu (x)</span></h4><p><img src="/2024/07/30/Trip-Japan/18.jpg" alt="天然温泉浪速之汤 Tennen Onsen Naniwa-no-yu"></p>
<p>喜欢泡温泉的人，如果手持大阪周游卡便可以免费享用「浪速之汤」的天然温泉。这儿的温泉有露天和室内两种，即使下雨也不怕行程受影响。 「浪速之汤」的温泉素来有「美人汤」的美誉，有露天浴场及岩盘浴等，泡汤时间不限，可以慢慢享用不同类型的温泉，如冷泉、碳酸泉、按摩池等。泡完温泉还可以享用盐桑拿、蒸气桑拿，非常写意。</p>
<p>笔者首推露天温泉，可以一边泡汤，一边欣赏大阪市的夜色，非常有度假感，之后再到室内池泡泡冷泉提神，然后到旁边的天神桥筋商店街吃饭。</p>
</blockquote>
<blockquote>
<h4><span id="中之岛-nakanoshima-">中之岛 Nakanoshima (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/19.jpg" alt="中之岛 Nakanoshima"></p>
<p>中之岛是大阪市的第一个公园，因为介于河道之间而呈长条形，长约1.5公里，面积很大。当中的绿化地方很多，如环绕着公园而建的绿色步道，非常适合散步和慢跑。</p>
<p>中之岛的值得一逛的地方有很多，如以巴洛克样式建成的中之岛图书馆、展示了中国和朝鲜陶瓷的东洋陶瓷美术馆、重要文化财的中央公会堂，经常举办大小不同的文化艺术活动。</p>
<p><img src="/2024/07/30/Trip-Japan/20.jpg" alt="中之岛 玫瑰园"></p>
<p>最令中之岛闻名的是位于公园中央的玫瑰园(Nakanoshima Rose Garden)。园区占地1万3千平方尺，长约500公尺，种植了超过3700株玫瑰，品种多达300种。每年五月和十月的花季，不同色调的玫瑰在园内争妍斗丽，大小不一，各具美态，远看像极了凡尔赛宫的玫瑰园，绝对值得一访。</p>
</blockquote>
<blockquote>
<h4><span id="箕面瀑布-minoo-falls-x">箕面瀑布 Minoo Falls (x)</span></h4><p><img src="/2024/07/30/Trip-Japan/21.jpg" alt="箕面瀑布-Minoo-Falls"></p>
<p>箕面瀑布位于日本最古老的森林公园—「明治森林箕面国定公园」内，当年是为了纪念明治天皇登记百年而设立的。箕面瀑布入选百大之一，附近有一个平台可以让人免费拍照。而每年的11月中旬到12月上旬，整个山头都是一片火红，是大阪著名的赏枫地点。由于公园的面积大，所以枫叶季时份外壮观。最理想的赏枫地点是泷安寺、西江寺和桥木亭一带，可以看到绿、红、橘、黄等不同层次的枫叶。</p>
<p><img src="/2024/07/30/Trip-Japan/22.jpg" alt="红叶天妇罗"></p>
<p>箕面公园内的商店街挺好逛的，其中最令笔者印象深刻的食物要数枫叶季限定的「红叶天妇罗」，把枫叶用盐渍过后再裹上粉浆油炸。论口感和美道，笔者还是觉得原始的天妇罗比较好吃，但也是一种有趣的体验吧。</p>
</blockquote>
<blockquote>
<h4><span id="万博纪念公园-expo-70-commemorative-park">万博纪念公园 Expo ’70 Commemorative Park (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/23.jpg" alt="万博纪念公园 Expo ’70 Commemorative Park"></p>
<p>万博纪念公园的前身是1970年的世界博览会会场，改建后的公园仍保留了当年世博会的场馆太阳之塔和钢铁馆等建筑，同时新建了文化园和日本庭园等，种植着不同种类的植物，四季宜人，景色不一，如樱花、绣球花、向日葵、红叶等，是赏花的好去处。</p>
<p>大阪的祭典如夏天的萤火虫之夜、向日葵祭等都会在这儿举行，有时会有水上乐园、灯饰、鬼屋等。除了祭典，公园旁边有一间日本最大的复合设施商场「EXOICITY」，不少品牌和餐厅进驻其中，亦有户外游乐设施供孩子玩乐，非常适合家庭旅行。</p>
</blockquote>
<blockquote>
<h4><span id="难波八阪神社-namba-yasaka-shrine-">难波八阪神社 Namba Yasaka Shrine (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/24.jpg" alt="难波八阪神社 Namba Yasaka Shrine"></p>
<p>在繁荣热闹的难波之中，有一个非常巨大和突出的青色狮子殿隐身在难波宁静的社区之中。这一庭青色狮子殿是一个张开了大口的狮子头，叫八阪神社，高12公尺，阔11公尺，非常引人注目。相传八阪神社是为了追忆仁德天皇而建的，后来因为种种原因而搬到这儿，并以祈求「金运」和「必胜运」闻名。</p>
<p>走进神社就像是走进了狮子的口中，感觉非常有趣。每年新年，这儿都会有神乐表演、舞蹈表演等，偶尔有撤饼、撒豆等各种祭神活动，非常热闹，颇值得到访。</p>
</blockquote>
<blockquote>
<h4><span id="天神桥筋商店街-tenjinbashisuji-shopping-street">天神桥筋商店街 Tenjinbashisuji Shopping Street (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/25.jpg" alt="天神桥筋商店街 Tenjinbashisuji Shopping Street"></p>
<p>全长约2.6公里的「天神桥筋商店街」又被称为日本第一长商店街，横跨了堺筋线三个地铁站。如果在心斋桥找不到心头好，或想避开心斋桥的人潮，不妨来这里寻宝。这儿有餐厅、药妆店、超市、电器，想得到的都可以找到。至于美食，笔者推荐中村屋(可乐饼)、鸣门鲷鱼烧本铺、玉出超市(一日元贷品)和章鱼烧道乐Wanaka。 Wanaka曾入选米芝莲推荐餐厅，千万不可以错过。</p>
<p><img src="/2024/07/30/Trip-Japan/26.jpg" alt="天满宫"></p>
<p>天神桥2 丁目有一座著名的神社「天满宫」，供奉着学问之神「菅原道真」，每年都吸引很多莘莘学子前来参拜。每年七月，这儿会举拜日本三大祭典之一的「天神祭」，届时会有充满日本传统特色的游行，非常壮观。</p>
</blockquote>
<blockquote>
<h4><span id="大阪造币局-japan-mint-x">大阪造币局 Japan Mint (x)</span></h4><p><img src="/2024/07/30/Trip-Japan/27.jpg" alt="大阪造币局 Japan Mint"></p>
<p>大阪造幣局博物館雖然是展出錢幣及其生產過程，但其實這個地方是以當中的櫻花大道聞名，堪稱一個櫻花博物館。這一條櫻花隧道全長570公尺，不但是季節限定，而且一年只開放7天供市民免費入場參觀，因此每天有為數不清的當地人和旅客慕名而來。局內的櫻花數量繁多，超過一百種櫻花，顏色多樣，能一次看盡櫻花的各種姿態。由於每年開花的時間不一，有興趣的旅人必須關注官網的最新動向，才不必錯過其風采。</p>
</blockquote>
<blockquote>
<h4><span id="大阪儿童乐园-kids-plaza-osaka-x">大阪儿童乐园 Kids Plaza Osaka (x)</span></h4><p><img src="/2024/07/30/Trip-Japan/28.jpg" alt="大阪儿童乐园 Kids Plaza Osaka"></p>
<p>一直听说大阪是个非常适合亲子旅行的地方，因为这儿有很多适合小孩子放电的地方，譬如大阪儿童乐园。这是一个集合了自然科学、创意、冒险、文化于一身的乐园，楼高5层，每一层的主题不一样。小孩子能学会许多科学原理，又有机会发挥创意创作，并训练五感。想参加DIY的小朋友记得要及早报名喔。这儿的入场费不算贵，大人1400为日元、小中学生为800日元，3岁以上则为500日元，可以作为雨程的选择。</p>
<p>天保山港灣村是一個複合型娛樂中心，當中有很多好玩的設施，包括海遊館、天保山市場街、⼤阪樂⾼樂園、天保山摩天輪及聖瑪麗亞號-帆船型觀光船，非常適合一日遊。</p>
</blockquote>
<blockquote>
<h4><span id="帆船行观光船-圣玛莉号-santamaria-platform-">帆船行观光船 – 圣玛莉号 Santamaria Platform (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/29.jpg" alt="帆船行观光船 – 圣玛莉号 Santamaria Platform"></p>
<p>畅游大阪港湾并欣赏沿路风光的最佳方法是搭乘帆船型观光船—圣母玛利亚号。圣母玛利亚号是模仿哥伦布发现新大陆时所使用的船只建成，但尺寸比原版大两陪，载客量大。每天的班次分成白天和黄昏两种，前者每45分钟一班，后者则每小时一班，门票的价格亦有所不同，但使用大阪周游卡则可以免费搭乘。</p>
<p>白天游览：成人1,600日圆、儿童800日圆<br>黄昏游览：成人2,100日圆、儿童1,050日圆</p>
</blockquote>
<blockquote>
<h4><span id="海游馆-osaka-aquarium-kaiyukan">海游馆 Osaka Aquarium Kaiyukan (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/30.jpg" alt="海游馆 Osaka Aquarium Kaiyukan"></p>
<p>海游馆是日本规模最大的水族馆之一，饲养了六百多种、近三万只海洋生物，如水獭、海狮、企鹅、海豚、水母等，连全世界最大的鱼类鲸鲨也有，保证让人大开眼界。海游馆每日都有动物喂食秀，如企鹅、海豚、鲸鲨。出发前可先到官网查看时间表，千万不要错过喔﹗此外，游客还可以在这儿与鲨鱼互动，一尝触模鲨鱼的滋味，非常适合亲子旅行。</p>
<p>由于海游馆的门票价格高昂，笔者建议购买「大阪海游票」，除了入场卷外，还包括了一天内无限次搭乘电车和公车，是最划算的方案。</p>
</blockquote>
<blockquote>
<h4><span id="大阪乐高乐园-legoland-">大阪乐高乐园 LEGOLAND (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/31.jpg" alt="大阪乐高乐园 LEGOLAND"></p>
<p>大阪另一个让小孩子疯狂的地方—乐⾼®游乐场。这个室内游乐场位于大版港站，交通便利。乐园规定小孩和成人必需同时进场，是专门为小孩&#x2F;亲子设计而成的园区，设有好玩的游乐设备，如4D电影院、乐高工厂之旅、古堡历险、魔法转盘等。门票为2300日元，而且小孩3岁以上便需购票进场。笔者觉得价格颇高，但如果持有大阪周游卷便可以免费入场。</p>
</blockquote>
<blockquote>
<h4><span id="天保山大摩天轮-tempozan-giant-ferris-wheel">天保山大摩天轮 Tempozan Giant Ferris Wheel (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/32.jpg" alt="天保山大摩天轮 Tempozan Giant Ferris Wheel"></p>
<p>笔者向来对摩天轮情有独钟，喜欢坐在车厢中慢慢欣赏景色。天保山的大摩天轮高达112公尺，旋转一周的时间约15分钟，可以远眺天气好时可纵目四眺大阪港湾、关西国际机场等景点，非常适合情侣和家人来这儿放松身心。其中四个车厢是全透明的水晶车厢，没有恐高症的人可以搭乘看看。最特别的是，摩天轮会于入夜后亮灯并预报隔天天气，红色代表晴天、绿色代表多云、蓝色则代表雨天。即使对摩天轮没有兴趣，晚上在附近逛逛和拍照也不错。</p>
</blockquote>
<blockquote>
<h4><span id="临空城-rinku-premium-outlet-">临空城 RINKU PREMIUM OUTLET (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/33.jpg" alt="临空城OUTLET"></p>
<p>想把握时间在日本大卖特卖的人，可以考虑到距离关西机场仅20分钟车程的临空城OUTLET。这儿有超过200家品牌商店，商品种类众多，服饰、鞋履、厨具、行李箱等都应有尽有，价格便宜。不少日本自家品牌如Peach John、Samantha Thavasa、As Know As、Beam都在其中，连著名的运动品牌如Adidas、Le Coq Sportif、New Balance、Nike、Vans等都有，绝对是回国前血拼最后一波的最佳地点。</p>
</blockquote>
<blockquote>
<h4><span id="电电城-でんでんタウン">电电城 でんでんタウン (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/64.jpg" alt="img"></p>
<p><strong>探索日本粉丝文化</strong></p>
<p>电电城的街道上聚集了无数的书呆宅、科技宅与各种搜藏迷。此地的零售商店专门贩卖能满足各种特定兴趣的商品，包括动漫、塑料公仔、交换卡牌和电子产品等。电电城是各类搜藏迷的天堂。</p>
</blockquote>
<h3><span id="京都-kyoto">京都 Kyoto</span></h3><blockquote>
<h4><span id="清水寺">清水寺 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/40.jpg" alt="img"></p>
<p><strong>京都名寺，不只是壮丽的风景</strong></p>
<p>清水寺坐落于京都东面的一座小山上，从这里可以俯瞰京都全景。寺内由巨大立柱支撑的高台是日本最著名的形象之一。清水寺有的不只是优美的景色，在您抵达这座寺庙之前，参观就已经开始了。</p>
</blockquote>
<blockquote>
<h4><span id="鴨川">鴨川 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/41.jpg" alt="img"></p>
<p><strong>在京都风景优美的主要水道沿岸享用美食并领略传统文化</strong></p>
<p>无论何时，鸭川河岸都是远离城市喧嚣的完美场所。早上与当地居民一道沿着河岸散步、野餐，或在附近的餐馆用餐。游览<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/spot/79">先斗町</a>，体验当地丰富的传统文化和艺伎文化。</p>
</blockquote>
<blockquote>
<h4><span id="高台寺-">高台寺 (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/42.jpg" alt="img"></p>
<p><strong>华美的寺庙，致敬足智多谋的领主</strong></p>
<p>信步登上<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/kansai/kyoto/gion-and-higashiyama/">祇园</a>的山丘就会看到高台寺。这座寺庙是丰臣秀吉的遗孀为纪念丈夫而建造的。</p>
<p>丰臣秀吉的继任者德川家康协助了高台寺的建造，而丰臣秀吉的遗孀聘请了当时最著名的建筑家、画家和园林设计师。</p>
</blockquote>
<blockquote>
<h4><span id="錦市場">錦市場 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/43.jpg" alt="img"></p>
<p><strong>京都人的厨房：生意持续兴隆400年</strong></p>
<p>今天的锦市场与 400 多年前的露天鱼市场大为不同。</p>
<p>在锦市场，130 家摊贩挤在一条长约 400 米、宽约 3.9 米的狭窄通道中。</p>
</blockquote>
<blockquote>
<h4><span id="祇園">祇園 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/44.jpg" alt="img"></p>
<p><strong>艺伎文化和歌舞伎的发源地，精心保留了昔日的风貌</strong></p>
<p>祇园是探索<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/kansai/kyoto/">京都</a>另一个时代的绝佳场所。祇园被称为京都的娱乐区，尤其是那些被称为艺妓（或者说艺子更为恰当）的优雅表演者数百年来令观众深深着迷。在这里，低调美观的排屋和茶馆、提供传统京都美食的餐厅以及肃穆庄严的寺庙和神社比比皆是。</p>
</blockquote>
<blockquote>
<h4><span id="先斗町">先斗町 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/45.jpg" alt="img"></p>
<p><strong>参加独特的娱乐活动，在河畔用餐，再到历史悠久的艺伎区体验夜生活</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/kansai/kyoto/">京都</a>的先斗町地区以一条长巷为中心，这条巷子已铺设路面，两旁是鳞次栉比的传统木制建筑。先斗町白天静谧，晚上则热闹纷呈。这里酒吧和餐馆林立，吸引了大批美食家和文化迷前来，许多店铺可以用英语和其它语言招待外国客人。</p>
</blockquote>
<blockquote>
<h4><span id="八坂神社">八坂神社 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/46.jpg" alt="img"></p>
<p><strong>举办祇园祭的热闹神社</strong></p>
<p>八坂神社是<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/kansai/kyoto/">京都</a>最受敬仰的宗教场所之一。神社几乎总是充满了活力，热切的信徒如潮水般涌来，接受福祉，祈求好运。参观这座位于<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/kansai/kyoto/">京都</a>的重要神道神社，您自己也可能会收获一些好运。</p>
</blockquote>
<blockquote>
<h4><span id="洛北-x">洛北 (x)</span></h4><p><img src="/2024/07/30/Trip-Japan/47.jpg" alt="img"></p>
<p><strong>在京都的田园乡野造访宏伟的皇家离宫</strong></p>
<p>洛北区位于京都市中心北部，历史上曾长期是艺术家和传统工匠的汇聚之地。这里不仅有静美的寺院、绿树成荫的街道、风格古朴的商店和咖啡馆，还可以欣赏到宏伟的皇家离宫。</p>
</blockquote>
<blockquote>
<h4><span id="京都国際マンガミュージアム">京都国際マンガミュージアム (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/48.jpg" alt="img"></p>
<p><strong>老少咸宜的日本漫画圣地</strong></p>
<p>所有的日本漫画迷都应前往全球第一家专门致力于这种艺术形式的综合漫画博物馆—-京都国际漫画博物馆。</p>
</blockquote>
<blockquote>
<h4><span id="哲学の道-">哲学の道 (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/49.jpg" alt="img"></p>
<p><strong>在京都风景秀丽的步道上思考人生</strong></p>
<p>哲学之道以京都大学哲学教授西田几多郎的名字命名，因为他曾每日在此一边散步一边冥想。蜿蜒曲折的哲学之道位于静僻的乡间，俯瞰着运河，是午后漫步沉思的理想之所。</p>
</blockquote>
<blockquote>
<h4><span id="下鴨神社-">下鴨神社 (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/50.jpg" alt="img"></p>
<p><strong>原始森林中 2,000 年历史的古老神社</strong></p>
<p>下鸭神社是日本最古老、最尊贵的神社之一。下鸭神社位于高野川与鸭川交汇处，四周环绕着糺之森，这是一座在京都现代化改造时幸存下来的部分森林。</p>
</blockquote>
<blockquote>
<h4><span id="修学院離宮-">修学院離宮 (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/51.jpg" alt="img"></p>
<p><strong>欣赏皇室居所的美景</strong></p>
<p>修学院离宫是在 17 世纪由退位天皇后水尾上皇兴建，包含三个御所，每间御所都设有对应的庭园。在 1964 年附近土地被征购，因此能维持离宫被田原与稻田围绕的原始样貌。</p>
</blockquote>
<blockquote>
<h4><span id="嵐山">嵐山 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/52.jpg" alt="img"></p>
<p><strong>以竹林、美景和著名遗产而闻名</strong></p>
<p>岚山位于京都的西北地区，其世界闻名的竹林和随季节变化的美丽风景吸引了众多游客。该地区散布着寺庙、古老的皇家别墅和著名的历史古迹，其中许多都属于国宝级，甚至是公认的世界遗产。整个地区都已被日本政府指定为风景名胜区。</p>
</blockquote>
<blockquote>
<h4><span id="嵐山竹林">嵐山竹林 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/53.jpg" alt="img"></p>
<p><strong>漫步于京都竹林，徜徉于绿色隧道</strong></p>
<p>岚山竹林是京都最具标志性的景观之一，漫步其中，您将对这座城市留下不可磨灭的印象。</p>
</blockquote>
<blockquote>
<h4><span id="天龍寺">天龍寺 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/54.jpg" alt="img"></p>
<p><strong>天龙寺庭园是贵族传统与禅宗文化的完美结合</strong></p>
<p>天龙寺建于 1339 年，曾是一组规模宏大的寺庙建筑群，由一百多座子院组成。如今，只有一部分结构保留了下来。这里的庭园是日本传统庭园设计的最佳典范之一，也是吸引游客前来的最大原因。</p>
</blockquote>
<blockquote>
<h4><span id="嵯峨野観光鉄道">嵯峨野観光鉄道 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/55.jpg" alt="img"></p>
<p><strong>搭乘复古火车穿越京都令人惊叹的自然风光</strong></p>
<p>嵯峨野观光铁道又称为嵯峨野浪漫列车，往返于京都西缘的小火车嵯峨站与龟冈乡村之间。铁道之旅约为 25 分钟，将在您眼前呈现京都最美丽的风景。</p>
</blockquote>
<blockquote>
<h4><span id="渡月橋">渡月橋 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/56.jpg" alt="img"></p>
<p><strong>跨越京都乡间的美景</strong></p>
<p>渡月桥全长 155 米，横跨于缓慢流经<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/kansai/kyoto/sagano-and-arashi-yama-area">嵯峨岚山</a>的桂川上，是京都著名的景点，可以欣赏到西部丘陵的美景。优美桥身展现出日本美学传统精髓的美感。</p>
</blockquote>
<blockquote>
<h4><span id="宇治">宇治 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/57.jpg" alt="img"></p>
<p><strong>古镇茶道和浪漫河滨</strong></p>
<p>宇治小镇，风景秀丽，日本 11 世纪文学名著《源氏物语》就以此地为故事背景。这里的茶园、茶铺和朝圣之地，让它成为从京都出发一日游的热门景点。</p>
<p>宇治还有一条与城市同名的河流，您可沿河散步，亦可在河上泛舟，沿途造访林立的众多餐馆和商铺。<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/spot/69">宇治桥</a>曾是源氏故事的重要场景，今天已成为京都最浪漫的邂逅景点之一。宇治拥有历史悠久的茶铺和神道神社建筑。</p>
</blockquote>
<blockquote>
<h4><span id="萬福寺-">萬福寺 (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/58.jpg" alt="img"></p>
<p><strong>深受中国文化影响的寺庙</strong></p>
<p>万福寺是京都宇治地区的一个僻静之地，位于黄檗山山脚。这座松树环绕的寺庙于 1661 年由一位名叫隐元隆琦的中国僧人建造。寺庙属于明朝风格，许多建筑都用柚木建造而成，因此，它在两个方面都与众不同。</p>
</blockquote>
<blockquote>
<h4><span id="伏見稲荷大社">伏見稲荷大社 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/59.jpg" alt="img"></p>
<p><strong>著名的京都神道神社，令人印象深刻的鸟居</strong></p>
<p>伏见稻荷大社是日本稻荷神社的总本社，供奉着保佑五谷丰登、生意兴隆的稻荷大神。通往稻荷山的道路上矗立着似乎无穷无尽的亮橙色鸟居，令人叹为观止，是日本最著名的景观之一。</p>
</blockquote>
<blockquote>
<h4><span id="宇治川">宇治川 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/60.jpg" alt="img"></p>
<p><strong>于静谧的河畔拥抱茶道、历史和美好生活</strong></p>
<p>宇治川将<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/spot/2017">宇治市</a>一分为二。这条河是宇治市的核心，大部分店铺与餐厅皆位于河流两岸。全球公认的第一部长篇小说《源氏物语》就描述了宇治川上诗情画意的桥梁。</p>
</blockquote>
<blockquote>
<h4><span id="宇治橋">宇治橋 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/61.jpg" alt="img"></p>
<p><strong>一座通往宇治过往的古桥</strong></p>
<p>无论是从历史角度还是在小说创作方面，宇治桥及其周边区域都与日本过往的伟大故事紧密相连。文学经典《源氏物语》中的场景与日本茶史中的真实生活场景交织在一起，形成了宇治丰富的文化背景。</p>
</blockquote>
<blockquote>
<h4><span id="京都アニメーション">京都アニメーション (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/66.jpg" alt="img"></p>
<p>京都动画总部，已停业不再对外开放</p>
<p><img src="/2024/07/30/Trip-Japan/67.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/68.jpg" alt="img"></p>
<p>京都动画第一工作室（遗址）</p>
<p><img src="/2024/07/30/Trip-Japan/69.jpg" alt="img"></p>
<p>京都动画第二工作室</p>
</blockquote>
<blockquote>
<h4><span id="天橋立">天橋立 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/62.jpg" alt="img"></p>
<p><strong>踏上天然的天堂桥，漫步于松树林间</strong></p>
<p>天桥立是一个种满松树林的沙洲，以拥有日本三景之一而闻名，其他两景分别是<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/tohoku/miyagi/">宫城县</a>的<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/spot/2127">松岛</a>，和<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/chugoku/hiroshima/">广岛县</a>的<a target="_blank" rel="noopener" href="https://www.japan-travel.cn/destinations/chugoku/hiroshima/miyajima">宫岛</a>。此沙洲为一天然桥梁，连接着京都府北部的宫津湾两岸，同时隶属国家公园。</p>
</blockquote>
<blockquote>
<h4><span id="伊根の舟屋">伊根の舟屋 (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/63.jpg" alt="img"></p>
<p><strong>到日本最奇特的渔村里放空</strong></p>
<p>迷人的伊根 (Ine) 村庄，拥有毗邻海湾的独特舟屋，提供历史悠久的建筑景观与绝佳住宿。</p>
</blockquote>
<h3><span id="奈良-nara">奈良 Nara</span></h3><blockquote>
<p><img src="/2024/07/30/Trip-Japan/36.jpg" alt="奈良"></p>
<p>相信不用多作介绍，大家都知道奈良最著名的景点是什么—奈良鹿。</p>
<p>奈良鹿生活于奈良公园，由于公园范围很大，所以到处都可以看见它们的身影。常说日本人充满仪式感和礼貌，奈良鹿亦然。他们只要看见食物，就会一窝蜂跑到你面前向你鞠躬，非常可爱。长长的脖子做着一个非常不自然的动作，放在它们身上却份外逗趣。想喂鹿儿吃东西的话，可以在公园的小摊买鹿仙贝。因为鹿仙贝的看似可口，笔者忍不住偷尝了一口，却发觉只带有一点苦涩味，并不好吃。</p>
<p><img src="/2024/07/30/Trip-Japan/37.jpg" alt="奈良 - 東大寺"></p>
<p>与奈良鹿拍过照后，可以继续向东大寺和春日大社出发。往深处走，鹿儿的数量渐渐减少，生活在这儿的鹿相较奈良公园的安静和悠闲，一副不想被打扰的模样。</p>
<p><img src="/2024/07/30/Trip-Japan/38.jpg" alt="奈良 - 春日大社"></p>
<p>单就景点而论，笔者最喜欢春日大社。甫踏进春日大社的范围便仿如置身一个奇幻的森林般，静谧又空灵，不禁令人放慢脚步，生怕划破这儿的宁静。偶尔看见几头鹿儿在石灯笼和森林间穿梭，俨如神社的守护者。</p>
</blockquote>
<h3><span id="神户-kobe">神户 Kobe</span></h3><blockquote>
<p>不少到大阪旅行的人都会同时到周边地区游玩，其中神户和奈良绝对是首选</p>
<p>著名的神户牛让人唾涎欲滴，其实除了神户牛，神户还有很多好玩的地方，非常适合一日游，甚或留宿一宵。以下推介几个适合一日游的景点：</p>
</blockquote>
<blockquote>
<h4><span id="神户港-port-of-kobe">神户港 Port of Kobe (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/34.jpg" alt="神户港"></p>
<p>这儿有着神户的地标—神户塔。神户塔有着开港的像征意义，是日本人向世界亮起的第一盏灯。楼高五层的灯塔有着令人惊艳的景色，可以欣赏整个神户港的美，而且免费开放，绝对不能错过。之后可以到附近的MOSAIC马赛克广场和美利坚公园逛逛，入夜后挺浪漫的。</p>
</blockquote>
<blockquote>
<h4><span id="旧居留地-kyuukyo-ryuuti">旧居留地 kyuukyo ryuuti (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/35.jpg" alt="神户 - 旧居留地"></p>
<p>日本开放时有不少外国人在这儿聚居，形成了一整排的欧式建筑。如今的房子都变成了高级精品店，但仍然吸引不少人到这儿拍照，感受欧式风情。如果你非常钟情于欧式建筑，亦可以到北野异人馆一游，但每一间都要支付门票才可进内参观。</p>
</blockquote>
<blockquote>
<h4><span id="南京町-">南京町 (-)</span></h4><p><img src="/2024/07/30/Trip-Japan/65.jpg" alt="img"></p>
<p><strong>神户中华街是欢乐的文化大熔炉</strong></p>
<p>神户历史悠久的中华街，又称为南京町，出现于早期开始进行国际贸易与文化演变的时期。</p>
</blockquote>
<h2><span id="食物选择">食物选择</span></h2><blockquote>
<p>基本都是特别要吃的 + 景点附近能吃的 + 各种小吃 + 便利店（饮料），因为酒店选择都带自助早餐的，所以只针对午餐、晚餐及小吃，但是要注意营业时间，这个很重要</p>
</blockquote>
<h3><span id="大阪">大阪</span></h3><blockquote>
<p>大阪烧、章鱼小丸子、拉面、乌冬、老爷爷蛋糕、可乐饼、鲷鱼烧、烤扇贝海胆、海鲜丼（551蓬莱肉包（pop子和pipi美）、Pablo 半熟起司蛋糕）</p>
</blockquote>
<h4><span id="一蘭-心齋橋店">一蘭-心齋橋店 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/92.jpg" alt="img"></p>
<p>氛圍閒適的拉麵餐廳（10:00 - 22:00），以豬大骨熬湯製成的豚骨拉麵為特色。</p>
<p><img src="/2024/07/30/Trip-Japan/93.jpg" alt="img"></p>
<p>天然とんこつラーメン（創業以来）（ 980 JPY）</p>
</blockquote>
<h4><span id="広東名菜-紅茶ほんちゃ-">広東名菜 紅茶(ほんちゃ)  (-)</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/94.jpg" alt="img"></p>
<p>如果在天满宫是在走不动饿了，就吃吃家乡饭吧（11:30 - 14:30，周日休息）2333333</p>
<p><img src="/2024/07/30/Trip-Japan/95.jpg" alt="img"></p>
<p>没有实际网站和菜单，平均消费价格是在 1000-2000 JPY</p>
</blockquote>
<h4><span id="可樂餅-中村屋">可樂餅 中村屋 (√)</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/96.jpg" alt="img"></p>
<p>高人氣美食攤（9:00 - 16:00，周日休息），提供各種口味的可樂餅和其他炸物，可供外帶，也较便宜，90 JPY 一个普通饼。</p>
<p><img src="/2024/07/30/Trip-Japan/97.jpg" alt="img"></p>
<p>排隊很長但是店家炸的速度很快，可樂餅好吃其他普普，要小心旁邊的鴿子會飛到你身上搶可樂餅XD</p>
</blockquote>
<h4><span id="鳴門鯛燒本舖-天神橋3丁目店">鳴門鯛燒本舖 天神橋3丁目店 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/98.jpg" alt="img"></p>
<p>鲷鱼烧竟然是被分类为日式糖果店（11:00 - 23:00）……约 300 JPY 一个</p>
<p><img src="/2024/07/30/Trip-Japan/99.jpg" alt="img"></p>
<p>有白桃、红豆、地瓜和奶油馅（？）的口味，以及抹茶、牛奶冰淇淋和方苏饼</p>
<p>越发为一抹多没能来玩感到可惜了呢&#x3D; &#x3D;</p>
</blockquote>
<h4><span id="章魚燒道樂わなか-天四店">章魚燒道樂わなか 天四店（√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/100.jpg" alt="img"></p>
<p>额，没啥好说的，真的是一路吃下去了（11:00 - 21:00，周二休息）</p>
<p><img src="/2024/07/30/Trip-Japan/101.jpg" alt="img"></p>
<p>內餡很軟、很好吃，也很燙口，要小心， 建議可以買四種口味的嚐鮮（8个 600 JPY，12个 850 JPY，也有 900 JPY 口味的）</p>
</blockquote>
<h4><span id="玉出超市-天神橋店">玉出超市 天神橋店 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/102.jpg" alt="img"></p>
<p>超级市场（），或者说是廉价市场（一日元贷品），“只有大阪才有的超市，值得來撿便宜。”</p>
<p><img src="/2024/07/30/Trip-Japan/103.jpg" alt="img"></p>
<p>进去看看有没有啥喝的买，毕竟应该也不会买便当吃</p>
</blockquote>
<h4><span id="大阪燒名店-きじ">大阪燒名店 きじ （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/104.jpg" alt="img"></p>
<p>御好燒餐廳（11:30 - 21:00），官网上是 800 JPY一份，周四休息！每月第一和第三個星期三也休息！</p>
<p><img src="/2024/07/30/Trip-Japan/105.jpg" alt="img"></p>
<p>日本很多餐厅都是这样的，一定要看时间，不然就要像我一样变动景点安排了<del>（不会我到霓虹第一天要去神户吧？草w）</del></p>
</blockquote>
<h4><span id="烤扇貝-魚福">烤扇貝 魚福 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/108.jpg" alt="img"></p>
<p>享用新鲜捕获的扇贝和海胆！（10:00 - 16:00，周三休息！）</p>
<p><img src="/2024/07/30/Trip-Japan/109.jpg" alt="img"></p>
<p>雖然熱門時段排隊要等很久很久，但如果有時間的話還是可以來看看。 大推烤扇貝，非常鮮甜，有用一點點奶油去提味。但是好像挺贵的一个！和隔壁まぐろや黒银（黑鲔鱼、金枪鱼生，5000 - 6000 JPY）有的一比。</p>
</blockquote>
<h4><span id="小判屋-">小判屋 (-)</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/111.jpg" alt="img"></p>
<p>蕎麥麵店，但是可以换乌冬！（7:00 - 15:00，周六周日休息）</p>
<p><img src="/2024/07/30/Trip-Japan/110.jpg" alt="img"></p>
<p>如果在鱼福太贵了且没吃饱，那就再来这里吃碗乌冬吧（600 JPY）</p>
</blockquote>
<h4><span id="老爺爺蛋糕店">老爺爺蛋糕店 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/106.jpg" alt="img"></p>
<p>現烤的起司蛋糕（9:00 - 20:00）吃起來像是舒芙蕾， 冰過之後再吃的話是綿密的起司蛋糕</p>
<p><img src="/2024/07/30/Trip-Japan/107.jpg" alt="img"></p>
<p>大阪才有的蛋糕店，是人氣排隊店，每當蛋糕出爐時店員就會搖鈴鐺提醒路人，蛋糕上印上老爺爺的可愛頭像（735&#x2F;965 JPY？不同时令好像不同价格）</p>
</blockquote>
<h4><span id="大阪燒-千歲">大阪燒 千歲 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/112.jpg" alt="img"></p>
<p>好像浪速区的大阪烧和梅田那边的不太一样（16:30 – 19:15），周二周三休息！可以去再尝试一下</p>
<p><img src="/2024/07/30/Trip-Japan/113.jpg" alt="img"></p>
<p>餐點內的肉片、海鮮都給得很大方（850-1600 JPY），就是味道稍微重了些。值得一提的是这家的网站还是2002年的风格2333333</p>
</blockquote>
<h4><span id="まぐろ屋-天">まぐろ屋 天 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/116.jpg" alt="img"></p>
<p>好像基本是海鲜丼（11:00 - 20:00），吃起来估计是大型寿司，不知道能不能接受</p>
<p><img src="/2024/07/30/Trip-Japan/117.jpg" alt="img"></p>
<p>倒不是很贵（1000-2000 JPY），听说也不用排队</p>
</blockquote>
<h3><span id="京都">京都</span></h3><blockquote>
<p>抹茶、猪扒饭、牛肉丼、炸牛排和鳗鱼、日式餐点、烤肉自助、海鲜饭、烧烤、热狗（牛奶）</p>
</blockquote>
<h4><span id="牛排丼-red-rock">牛排丼 Red Rock （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/120.jpg" alt="img"></p>
<p>这家是连锁店（17:00-21:00），京都大阪神户都有，门口是自动点餐机，有中文菜单，点餐、缴费都是在门口自动完成，用现金能自动找零，还支持支付宝</p>
<p><img src="/2024/07/30/Trip-Japan/121.jpg" alt="img"></p>
<p>不算太贵（1000-2000 JPY），好像还能预定，啊不对，是外卖&#x3D; &#x3D;</p>
</blockquote>
<h4><span id="炸牛排-京都勝牛-伏見稻荷店">炸牛排 京都勝牛 伏見稻荷店 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/122.jpg" alt="img"></p>
<p>主打炸牛排+鳗鱼套餐（10:30-20:30）的定食餐廳，本来想在大阪吃的，但是叫“京都”所以还是来京都吃了</p>
<p><img src="/2024/07/30/Trip-Japan/123.jpg" alt="img"></p>
<p>注意<del>预约（不能在线预约了）和</del>排队啊！（2000-3000 JPY）</p>
</blockquote>
<h4><span id="宇治日の出園">宇治日の出園 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/124.jpg" alt="img"></p>
<p>宇治特有的抹茶店（9:00-17:00），来宇治就是吃甜点和抹茶的</p>
<p><img src="/2024/07/30/Trip-Japan/125.jpg" alt="img"></p>
<p>有抹茶团子（500 JPY）、冰淇淋（500 JPY）、芭菲（850 JPY）、饭团（150 JPY）甚至拉面（900 JPY）……</p>
</blockquote>
<h4><span id="豚ゴリラ-新京極六角店">豚ゴリラ 新京極六角店 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/126.jpg" alt="img"></p>
<p>日式炸豬扒餐廳（11:00-21:30），可以预定，啊不对，是外卖，也不太算贵（1000-2000 JPY）</p>
<p><img src="/2024/07/30/Trip-Japan/127.jpg" alt="img"></p>
<p>记得发POP子和PIPI美的那集吐槽在社交平台！</p>
</blockquote>
<h4><span id="鮨彦">鮨彦 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/128.jpg" alt="img"></p>
<p>典型日式小饭馆（11:30-14:00），周三休息</p>
<p><img src="/2024/07/30/Trip-Japan/129.jpg" alt="img"></p>
<p>有炸鸡、天妇罗、寿司、酱鱼等（2000-3000 JPY）</p>
</blockquote>
<h4><span id="丸玉飯店-">丸玉飯店 (-)</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/130.jpg" alt="img"></p>
<p>中餐馆（11:30-21:00），如果不想吃日料可以考虑这家</p>
<p><img src="/2024/07/30/Trip-Japan/131.jpg" alt="img"></p>
<p>全看那天海洋馆边上吃的海鲜饭吃不吃的下去，吃不下真要选这个（1000-2000 JPY）</p>
</blockquote>
<h4><span id="国産牛焼肉食べ放題-あぶりや炙屋-四条河原町站前店">国産牛焼肉食べ放題 あぶりや（炙屋） 四条河原町站前店 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/132.jpg" alt="img"></p>
<p>烤肉自助（17:00-22:00），确实得吃点自助看看能饱到什么程度</p>
<p><img src="/2024/07/30/Trip-Japan/133.jpg" alt="img"></p>
<p>记得预约，只营业到22:00，2小时最好还是晚上时间不紧的时候去（4000-6000 JPY）</p>
</blockquote>
<h4><span id="王記">王記 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/134.jpg" alt="img"></p>
<p>中式烧烤（17:00-22:30），国庆去吃好像没问题</p>
<p><img src="/2024/07/30/Trip-Japan/135.jpg" alt="img"></p>
<p>看评价说菜品稍微少了点，希望去的时候能吃饱就好（2000-3000 JPY）</p>
</blockquote>
<h4><span id="funaya-kajiya-神慈や">FUNAYA KAJIYA 神慈や （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/136.jpg" alt="img"></p>
<p>海鲜餐厅（11:00-14:30），用今日获得的海鲜做食材准备的饭菜</p>
<p><img src="/2024/07/30/Trip-Japan/137.jpg" alt="img"></p>
<p>真的可能会选这个<del>限量的豪华海鲜套餐（6800 JPY），看有没有余钱吧</del>实际考虑吃不完只好作罢，记得预约</p>
</blockquote>
<h4><span id="お食事処-兵四楼-">お食事処 兵四楼 (-)</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/138.jpg" alt="img"></p>
<p>他家的招牌是寿司（11:00-14:00，周四休息），可是我不太吃寿司</p>
<p><img src="/2024/07/30/Trip-Japan/139.jpg" alt="img"></p>
<p>这海鲜饭好像诚意不如大阪海洋馆边上的啊（1000-2000 JPY）</p>
</blockquote>
<h4><span id="bis-dogg">BiS Dogg （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/140.jpg" alt="img"></p>
<p>不是哥们！你有狗有车这怎么玩啊！</p>
<p><img src="/2024/07/30/Trip-Japan/141.jpg" alt="img"></p>
<p>真的很想吃这个，但是好像只周六-周一，10:30-17:00上班，不是，你有好吃的有车有狗还有两只还只要上三天班早十晚五，我泪喷了出来！</p>
</blockquote>
<h3><span id="神户">神户</span></h3><blockquote>
<p>铁板牛肉</p>
</blockquote>
<h4><span id="神戸牛-黒澤-kobe-beef-kurosawa">神戸牛 黒澤 Kobe Beef KUROSAWA （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/114.jpg" alt="img"></p>
<p>可能需要预约！（11:00 - 15:00）没预约就要碰运气了</p>
<p><img src="/2024/07/30/Trip-Japan/115.jpg" alt="img"></p>
<p>表面经过烤焦，锁住风味和甜味的三分熟的神户牛排，切成适合咀嚼的厚度！奢华地铺开，直到覆盖米饭！最后，在上面放上一个融化的鸡蛋！（建议选5500 JPY的加肉版本）</p>
</blockquote>
<h3><span id="奈良">奈良</span></h3><blockquote>
<p>寿喜烧</p>
</blockquote>
<h4><span id="すき焼きと牛まぶし-ももしき-">すき焼きと牛まぶし ももしき (-)</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/118.jpg" alt="img"></p>
<p>壽喜燒餐廳（11:00-22:00），听说会教怎么正确的吃233333，需要预约</p>
<p><img src="/2024/07/30/Trip-Japan/119.jpg" alt="img"></p>
<p>可以预约，说实话有点贵（5170 JPY），但是听说肉品质很好？</p>
</blockquote>
<h4><span id="水谷茶屋">水谷茶屋 （√）</span></h4><blockquote>
<p><img src="/2024/07/30/Trip-Japan/142.jpg" alt="img"></p>
<p>只能说是柳暗花明又一村（11:00-15:30，周三休息），寿喜烧大概是吃不上了，没能预约到&#x3D; &#x3D;</p>
<p><img src="/2024/07/30/Trip-Japan/143.jpg" alt="img"></p>
<p>希望能抢到位置吧（1000-2000 JPY），毕竟在公园里面，会被鹿袭击</p>
</blockquote>
<h2><span id="住宿选择">住宿选择</span></h2><blockquote>
<p>离要去逛的地点不太远就好（离大部分景点小几站公共交通能到），一晚在300-400左右，以下酒店只是我自己看Google Map得到的，并不是自己都体验过，价格皆未含税，需要有10%-20%左右的额外费用</p>
</blockquote>
<h3><span id="大阪-2024925-929">大阪 (2024.9.25-9.29)</span></h3><blockquote>
<h4><span id="ネストホテル大阪心斎橋-nest-hotel-osaka-shinsaibashi">ネストホテル大阪心斎橋 (Nest Hotel Osaka Shinsaibashi)</span></h4><p><img src="/2024/07/30/Trip-Japan/71.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/72.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/73.jpg" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://www.google.com.hk/maps/place/Nest+Hotel+Osaka+Shinsaibashi/@34.6754683,135.5031612,17z/data=!4m11!3m10!1s0x6000e717d023b9dd:0x8fdf9054ab32cd20!5m4!1s2024-09-25!2i4!4m1!1i2!8m2!3d34.6754639!4d135.5057361!16s%2Fg%2F11b6_s8wgf?hl=zh-CN&entry=ttu">2-4-10 Minamisenba Chuoku, 心斋桥, 大阪, 日本, 542-0081</a></p>
<p>优点：中文服务 离徒步景点极近 价格较低，处于一年低位（277）</p>
<p>缺点：卫生间都较小 无早餐</p>
</blockquote>
<blockquote>
<h4><span id="天滿橋京阪酒店-hotel-keihan-tenmabashi">天滿橋京阪酒店 (Hotel Keihan Tenmabashi)</span></h4><p><img src="/2024/07/30/Trip-Japan/74.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/75.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/76.jpg" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://www.google.com.hk/maps/search/Hotel+Keihan+Tenmabashi/@34.6894369,135.5145365,17z/data=!4m5!2m4!5m3!5m2!1s2024-09-25!2i4?hl=zh-CN&entry=ttu">1-2-10 Tanimachi, Chuo-ku, 大阪城和京橋, 大阪, 日本, 540-0012</a></p>
<p>优点：离大阪城、中之岛公园极近 有早餐</p>
<p>缺点：室内设计不如前者 卫生间都较小 价格较高，处于一年高位（348&#x2F;413）</p>
</blockquote>
<blockquote>
<h4><span id="アパホテル大阪谷町四丁目駅前apa-hotel-osaka-tanimachi-4chome-ekimae">アパホテル〈大阪谷町四丁目駅前〉(APA Hotel Osaka-Tanimachi 4Chome-Ekimae)</span></h4><p><img src="/2024/07/30/Trip-Japan/77.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/78.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/79.jpg" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://www.google.com.hk/maps/place/%E9%98%BF%E5%B8%95%E5%88%AB%E5%A2%85%E9%85%92%E5%BA%97%E5%A4%A7%E9%98%AA%E8%B0%B7%E8%A1%97%E5%9B%9B%E6%9D%A1%E7%AB%99%E5%89%8D/@34.6810165,135.5138926,17z/data=!4m11!3m10!1s0x6000e7306daa20e7:0x2c6f4f419f098b28!5m4!1s2024-09-25!2i4!4m1!1i1!8m2!3d34.6810121!4d135.5164675!16s%2Fg%2F1th1cm7b?hl=zh-CN&entry=ttu">1-1-27 Noninbashi, Chuo-ku, 大阪城和京橋, 大阪, 日本, 540-0011</a></p>
<p>优点：有早餐 价格较低，处于一年低位（263&#x2F;312） 有简单公浴</p>
<p>缺点：房间太小了（10） 地理位置较中庸 对泡没兴趣的没必要</p>
</blockquote>
<blockquote>
<h4><span id="vessel賓館-心齋橋-vessel-inn-shinsaibashi">Vessel賓館 - 心齋橋 (Vessel Inn Shinsaibashi) (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/80.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/81.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/82.jpg" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://www.google.com/maps/place/VESSEL+INN+SHINSAIBASHI/@34.6753905,135.5013507,17z/data=!4m11!3m10!1s0x6000e71774597b85:0xea826ebd0d4d65f5!5m4!1s2024-09-25!2i4!4m1!1i2!8m2!3d34.6753861!4d135.5039256!16s%2Fg%2F11c2nvv_mx?entry=ttu">2-12-11 Minamisenba, Chuo, 心齋橋, 大阪, 日本, 542-0081</a></p>
<p>优点：有早餐 价格适中，处于一年最低位（329&#x2F;374） 房间设置合理 有免费饮品</p>
<p>缺点：算早餐和税后有点贵了，且必须在8月24日前付款，唯一打算放弃的理由</p>
</blockquote>
<blockquote>
<p>最后应该会在ネストホテル大阪心斎橋和Vessel賓館 - 心齋橋里选，一个三星一个偏四星，更偏向后者，但差价确实有点大</p>
</blockquote>
<h3><span id="京都-2024929-1003">京都 (2024.9.29-10.03)</span></h3><blockquote>
<h4><span id="京都四條河原町rb酒店-rampb-hotel-kyoto-shijo-kawaramachi">京都四條河原町Ｒ＆Ｂ酒店 (R&amp;B Hotel Kyoto Shijo Kawaramachi) (√)</span></h4><p><img src="/2024/07/30/Trip-Japan/83.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/84.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/85.jpg" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://www.google.com/maps/place/R%26B+Hotel,+258+Ichinoch%C5%8D,+Shimogyo+Ward,+Kyoto,+600-8018%E6%97%A5%E6%9C%AC/@35.0011291,135.7664581,17z/data=!3m1!4b1!4m6!3m5!1s0x600108bfb13c4213:0xfb0d741e65a744aa!8m2!3d35.0011247!4d135.769033!16s%2Fg%2F11gf5qk7b2?entry=ttu">258 Ichinocho, 河原町, 京都, 日本, 600-8018</a></p>
<p>优点：有早餐 价格较低，处于一年低位（254&#x2F;279） 房间设置合理 有免费饮品 离祇園较近</p>
<p>缺点：房间较小（11） 评分较少</p>
</blockquote>
<blockquote>
<h4><span id="京都四条河原町超级酒店super-hotel-kyotox2fshijo-kawaramachi">京都四条河原町超级酒店(Super Hotel Kyoto&#x2F;Shijo Kawaramachi)</span></h4><p><img src="/2024/07/30/Trip-Japan/86.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/87.jpg" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://www.google.com/maps/place/Super+Hotel/@35.0050548,135.7632662,17z/data=!3m1!5s0x600108945ab3237d:0xa3a4f6caff58915e!4m11!3m10!1s0x600108945ab4a5cb:0x494f2e716a4d20a4!5m4!1s2024-09-29!2i5!4m1!1i2!8m2!3d35.0050505!4d135.7681371!16s%2Fg%2F1xb2dgn2?entry=ttu">604-8042 京都府, 京都, Nakagyo-ku Urateramachidori Shijo Noboru Nakanomachi 538-1, 日本</a></p>
<p>优点：有免费早餐 有免费饮品 离景点公共交通很近 有小温泉</p>
<p>缺点：房间较小（12） 没看到卫生间样式 小温泉分时段的（也不会去） 价格较高（412）</p>
</blockquote>
<blockquote>
<h4><span id="京都中心旅館-kyoto-central-inn">京都中心旅館 (Kyoto Central Inn)</span></h4><p><img src="/2024/07/30/Trip-Japan/88.jpg" alt="img"></p>
<p><img src="/2024/07/30/Trip-Japan/89.jpg" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://www.google.com/maps/place/Kyoto+Central+Inn/@35.0039653,135.7655225,17z/data=!4m11!3m10!1s0x60010895afcfffff:0xba2caeacee1cb03!5m4!1s2024-09-29!2i5!4m1!1i2!8m2!3d35.0039609!4d135.7680974!16s%2Fg%2F11b86yx0td?entry=ttu">2Chome 30 Otabityou Higashiiru Shijo douri teramachi Shimogyo Kyoto, 河原町, 京都, 日本, 600-8002</a></p>
<p>优点：离景点公共交通很近 价格便宜（246）</p>
<p>缺点：房间设计不合理（13） 没看到卫生间样式 酒店显老旧</p>
</blockquote>
<blockquote>
<p>感觉京都四條河原町Ｒ＆Ｂ酒店是唯一选择，京都在进入国庆后，合适的住宿都要爬上400左右，算税就真有点吓人了</p>
<p>Tips：日本的酒店有些是没有个人卫浴的（公浴或小温泉），有些是只限女性（Female Only），有些是青旅&#x2F;胶囊式的，一定要分辨清楚</p>
</blockquote>
<h2><span id="行程安排">行程安排</span></h2><blockquote>
<p>一切行程注意点（包括循着什么路标走、从什么口出站、在哪个车站ID哪个站台号上什么车）都以 Google Map 为准，这里如果是乘 JR 铁路火车类的，建议再在 Apple Map 上看一遍路线，能看到票价和桌席价格的分开，谷歌上是把这两个价格合一起了，以下仅为简略活动记载</p>
<p>（要注意尽可能避开拥挤线路，也需要注意末班车时间，如果有赶不上末班车的场景，需尽早结束夜间景点游玩）</p>
<p>如果下雨，注意交换景点访问的同时更是要看好吃饭的问题，尽量保证雨天多室内，感兴趣景点的到访</p>
<p>一定要记得先把城市的地图离线下载下来，把要走的线路“钉住”保存下来</p>
</blockquote>
<h3><span id="925-水曜日">9.25 (水曜日)</span></h3><blockquote>
<h4><span id="萧山国际机场厦航-mf8707">萧山国际机场（厦航 MF8707）</span></h4><p>14:40 起飞 需要提前约3小时到达萧山国际机场办理值机 </p>
<p>地铁加步行到机场约1小时</p>
<p>即 10:30 左右从家出发即可 午餐在机场解决（K记&#x2F;M记）</p>
<h4><span id="vessel賓館-心齋橋1210-jpy">Vessel賓館 - 心齋橋（1210 JPY）</span></h4><p>18:15 降落 到达关西国际机场 更换手机卡 <del>买Sucia卡并狠狠充值（）</del></p>
<p>去關西國際機場 LIMON 服務櫃台（關西國際機場第一航廈1樓）兑换大阪地鐵巴士乘車券 激活日期 9.26</p>
<p>乘南海機場線（機場線急行電車南海難波）</p>
<p>關西機場 - 南海難波（此时变为南海本線，但“繼續搭乘相同交通工具”）- 天下茶屋 约40分钟</p>
<p>从天下茶屋站外换乘堺筋線（各站停車北千里）</p>
<p>天下茶屋 - 長堀橋 约8分钟</p>
<p>步行约3分钟到达Vessel賓館 - 心齋橋，办理入住手续（check in）</p>
<h4><span id="一蘭-心齋橋店1000-jpy">一蘭 心齋橋店（1000 JPY）</span></h4><p>19:30 先去一兰尝尝拉面 走路约5分钟，在街对面就可以到</p>
<h4><span id="心齋橋-道頓堀-難波">心齋橋 道頓堀 難波</span></h4><p>20:30 左右 从一兰步行，穿心齋橋筋商店街，达道頓堀，沿河两边逛逛，后抵難波，踩点锁定一下老爺爺蛋糕店</p>
<p>21:30 左右 从难波步行返回 Vessel賓館 - 心齋橋</p>
</blockquote>
<h3><span id="926-木曜日">9.26 (木曜日)</span></h3><blockquote>
<h4><span id="大阪城240600-jpy">大阪城（240+600 JPY）</span></h4><p>8:00 起床 9:00左右餐厅吃完早饭 </p>
<p>从長堀橋出发，乘長堀鶴見綠地線（各站停車門真南）</p>
<p>長堀橋 - 森之宫 约7分钟 至大阪城周围</p>
<p>于大阪城逛 2-3 小时左右（战争博物馆、演艺剧场、神社、花园庭院、港口码头、棒球场、音乐厅）</p>
</blockquote>
<blockquote>
<h4><span id="黑门市场1905000-6000-jpy">黑门市场（190+5000-6000 JPY）</span></h4><p>12:00 从大阪城 大手門出，经大阪歷史博物館</p>
<p>至谷町四丁目車站，乘谷町線（各站停車八尾南）</p>
<p>谷町四丁目車站 - 谷町九丁目 约3分钟</p>
<p>后站内换乘千日前線（各站停車野田阪神）</p>
<p>谷町九丁目 - 日本橋（大阪） 约2分钟</p>
<p>好的，现在从日本橋出站，進入堺筋&#x2F;紀州街道&#x2F;府道102号</p>
<p>找到烤扇貝 魚福，开吃，黑门市场应该有很多其他的吃的，吃不饱且有时间可以多尝试，希望不要排队排很久</p>
<p>如果还是饿，请移步小判屋吃乌冬面</p>
</blockquote>
<blockquote>
<h4><span id="千日前道具屋筋商店街">千日前道具屋筋商店街</span></h4><p>14:00 基本吃完了，沿サウスロード千日前向西400米，步行6分钟就能抵达</p>
<p>購物街，專門販售家居用品、廚具、陶器和工具。</p>
<p>应该不会买什么，逛逛看情况就好啦</p>
</blockquote>
<blockquote>
<h4><span id="大阪日本橋電器街-jpy">大阪日本橋電器街（? JPY）</span></h4><p>从千日前道具屋筋商店街經なんさん通り和堺筋&#x2F;紀州街道&#x2F;府道102号</p>
<p>600米 约9分钟 14:30&#x2F;15:00 怎么都走到这了吧……</p>
<p>这次应该只是随便逛逛，除非遇到什么不买过几天来没了的东西</p>
<p>不过即使要买也不知道要买什么，没有想买周边的情况，漫画？</p>
<p>不过和下面要去的大商场相比，确实可以考虑下是在这里逛久点</p>
<p><del>（PS：旁边有网咖和cosplay咖啡厅，所以要小心拐人）</del></p>
</blockquote>
<blockquote>
<h4><span id="新世界amp通天閣-10001000-2000-jpy">新世界&amp;通天閣 （1000+1000-2000 JPY）</span></h4><p>15:00 继续沿堺筋&#x2F;紀州街道&#x2F;府道102号向南900米左右，在惠美須町有一个小道，斜入通向通天閣</p>
<p>至于是否要上通天閣的特殊观光台，我觉得不用，或许我会经历梅田空中花园、通天阁、Harukas300展望台、天保山大摩天輪四次俯瞰大阪，到时候可以一一比较了2333333</p>
<p>通天閣之下的商业街便是新世界，比起登通天閣，我更想花时间在逛这片区域，这片地区有刀店、只有成年人才可以进入的遊戲機中心（柏青哥？）、MEGA 唐吉軻德（折扣店）……以至于我觉得要不别上通天阁了？</p>
<p>18:00 当然，如果真饿逛完后可以考虑在对面動物園前的大阪燒 千歲吃大阪烧做晚饭，或者再等下去的阿部野吃炸牛排（因为那家炸牛排叫“京都”的，所以感觉留到京都吃比较好）</p>
</blockquote>
<blockquote>
<h4><span id="harukas300展望台2000240-jpy">Harukas300展望台（2000+240 JPY）</span></h4><p>19:00 从大阪燒 千歲沿あべの筋&#x2F;谷町筋&#x2F;府道30号 步行1.1公里 约17分钟</p>
<p>旁边还有阿倍野 Q’s Mall、天王寺MIO这种大型购物中心，可以进去看看逛逛（但不会买什么应该），不过他们的营业时间至20:30、21:00就结束</p>
<p>可以先都小逛30分钟，然后20:00左右登展望台</p>
<p>位於 58 至 60 樓的 3 層觀景區域，設有露天中庭、玻璃牆面與咖啡館。</p>
<p>22:00 从天王寺乘御堂筋線（各站停車箕面萱野）</p>
<p>天王寺 - 心齋橋站 9分钟 后步行350米回到Vessel賓館 - 心齋橋</p>
</blockquote>
<h3><span id="927-金曜日">9.27 (金曜日)</span></h3><blockquote>
<h4><span id="神戶港910-jpy">神戶港（910 JPY）</span></h4><p>6:30 起床（感觉会成为在大阪最早起的一天） 8:00左右就要动身了，最迟9:30抵达神户港，但有个问题，这里涉及很多的路线</p>
<p>我选的是 御堂筋线 - 东海道、山阳本线</p>
<p>一来一回，包括9.29要去的奈良、京都，神户、大阪、奈良、京都应该是有周游券之类的优惠，所以这里不指明乘坐什么线路，但大概都是能1个半小时左右到的，看各自优惠了</p>
<p>例如：</p>
<p>但基本都是在三宫站 乘新交通港灣人工島線（各站停車北埠頭 經由 三宮）</p>
<p>三宫 - 中埠頭（兵庫） 约15分钟</p>
<p>9:30 抵达神户港 逛逛防波堤、灯塔这些</p>
</blockquote>
<blockquote>
<h4><span id="三宮本通商店街amp旧留居地amp南京町2505500-jpy">三宮本通商店街&amp;旧留居地&amp;南京町（250+5500 JPY）</span></h4><p>11:00 从中埠頭（兵庫）乘新交通港灣人工島線（各站停車三宮）</p>
<p>中埠頭（兵庫） - 三宫 约13分 步行</p>
<p>11:30 从三宫步行650米 约7分钟至三宮本通商店街</p>
<p>主要是逛逛陈列很漂亮的商业街，然后可以步行去旧居留地，看看欧式建筑</p>
<p>然后可以先去神戸牛 黒澤 Kobe Beef KUROSAWA 吃牛排（有点贵）</p>
<p>最后走走南京町，看看有没有珍珠奶茶</p>
</blockquote>
<blockquote>
<h4><span id="海遊館amp聖瑪麗亞號amp天保山大摩天輪66027009001000-2000290-jpy">海遊館&amp;聖瑪麗亞號&amp;天保山大摩天輪（660+2700+900+1000-2000+290 JPY）</span></h4><p>13:00 从南京町去海遊館，中间路线与费用也是受到周游券等影响，只能举例</p>
<p>例如：我回来坐的应该是 阪神本线 - 中央线（这里“急”的区分要注意）</p>
<p>但不论如何14:00一定要进海遊館了，如果还有时间，可以先在岸边看一眼聖瑪麗亞號帆船</p>
<p>19:00 左右从海遊館出来，前往まぐろ屋 天 吃饭（这里如果店不在了，可以选择隔壁的猪排饭，甚至赛百味，KFC）</p>
<p>20:00 前往天保山大摩天輪，理论上应该要更早一些？</p>
<p>22:00 从天保山大摩天輪沿港区第287号線步行450米到大阪港</p>
<p>从大阪港乘中央線（各站停車學研奈良登美丘）</p>
<p>大阪港 - 堺筋本町 约13分钟 后站内换乘堺筋線（各站停車天下茶屋）</p>
<p>堺筋本町 - 長堀橋 约1分钟 回到Vessel賓館 - 心齋橋</p>
</blockquote>
<h3><span id="928-土曜日">9.28 (土曜日)</span></h3><blockquote>
<h4><span id="中之島公園190-jpy">中之島公園（190 JPY）</span></h4><p>8:00 起床 9:00左右餐厅吃完早饭</p>
<p>从長堀橋出发，乘堺筋線（各站停車北千里）</p>
<p>長堀橋 - 北濱（大阪） 约3分钟 </p>
<p>（这里可以在北濱-京阪本线，先兑京都觀光乘車券 9.30）</p>
<p>后向北步行，从堺筋&#x2F;府道102号上岛</p>
<p>在中之岛东逛约1小时（很难去岛西，如果去需在中之岛上，難波橋乘京阪中之島線，向西有大江橋、渡邊橋、中之島（大阪））</p>
</blockquote>
<blockquote>
<h4><span id="大阪天滿宮">大阪天滿宮</span></h4><p>10:00 左右 从 中之島公園 芝生広場 找 ラジオ塔跡（石广播塔）方向，向北走天桥500米 约7分钟即达</p>
<p>于天滿宮逛1个半小时左右（一堆神社+結婚式場 可能逛不到） </p>
<p>从早上大阪城开始到天滿宮会连续走几个小时的路，需要注意中途休息</p>
<p>依自身情况，午饭是在天滿宮附近（広東名菜 紅茶(ほんちゃ) 没错，广东菜）解决还是撑到天神橋筋商店街</p>
</blockquote>
<blockquote>
<h4><span id="天神橋筋商店街1000-2000-jpy">天神橋筋商店街（1000-2000 JPY）</span></h4><p>11:30 从天滿天神繁昌亭离开大阪天滿宮，继续向北步行750米 约11分钟</p>
<p>到达天神橋筋商店街（但实际上走过去的路上应该开始就算天神橋筋商店街了，毕竟被称为日本第一长商店街，横跨了堺筋线三个地铁站）</p>
<p>12:00 开始边逛边吃，一路向北，从可乐饼（中村屋）开始吃起，吃鲷鱼烧（鸣门），吃章鱼小丸子（道乐Wanaka），还能在平价超市（玉出）买点喝的，能吃一个小时吗？</p>
</blockquote>
<blockquote>
<h4><span id="萬博紀念公園680230-jpy">萬博紀念公園（680+230 JPY）</span></h4><p>13:00 从玉出超市 天神橋店出发，步行160米至扇町（注意“急”）</p>
<p>乘堺筋線（準急行 京都河原町）</p>
<p>扇町 - 天神橋筋六丁目（此时变为阪急千里線 京都河原町，但“繼續搭乘相同交通工具”）- 淡路（此时变为阪急京都線 京都河原町，但“繼續搭乘相同交通工具”）- 南茨木 约20分钟</p>
<p>从南茨木站外换乘大阪單軌電車（各站停車大阪機場（單軌電車））</p>
<p>南茨木 - 萬博紀念公園 约6分钟</p>
<p>步行至马路对面即达，看了一下占地面积，如果是15:00才抵达，或时间不够（需约半天时间，17:00便截止），则需舍弃中之岛公园</p>
<p>于萬博紀念公園逛2-3小时（太阳塔、水车、鱼池、花田、游乐场）</p>
</blockquote>
<blockquote>
<h4><span id="梅田空中庭園53020001000-2000240-jpy">梅田空中庭園（530+2000+1000-2000+240 JPY）</span></h4><p>18:00 从太陽之塔对面正门行天桥至萬博紀念公園站（注意“急”）</p>
<p>乘大阪單軌電車（各站停車門真市）</p>
<p>萬博紀念公園（大阪）- 南茨木 约6分钟</p>
<p>从南茨木站外换乘阪急京都線（各站停車大阪梅田（阪急））</p>
<p>南茨木 - 十三車站 约20分钟</p>
<p>从十三車站站内换乘阪急神戶線（各站停車大阪梅田（阪急））</p>
<p>十三車站 - 中津（阪急） 约2分钟</p>
<p>由中津出站，向南沿梅田貨物駅西横線步行750米 约9分钟抵达空中庭園</p>
<p>但，事已至此，先吃饭吧</p>
<p>所以还是从中津出站，向南沿梅田貨物駅西横線步行750米 约10分钟抵达大阪燒名店 きじ</p>
<p>19:30&#x2F;20:00 从大阪燒名店 きじ吃完，额，走91米就到空中庭園，大概可以玩到22:00，主要是夜景观光。话说有浴衣漫步体验，可以带回家的那种（完了，某一抹多又落空了）</p>
<p>22:00 先由梅田空中庭園 步行至梅田，途经北梅田通&#x2F;大阪市道九条梅田線，约800米，12分钟</p>
<p>从梅田，乘御堂筋線各站停車中百舌鳥（大阪市營） 御堂筋線好像很拥挤，有显示“嚴重誤點”</p>
<p>梅田 - 心齋橋站，约6分钟，后往東走長堀通&#x2F;国道308号&#x2F;府道173号朝心斎橋筋前進400米，5分钟就回到Vessel賓館 - 心齋橋</p>
</blockquote>
<h3><span id="929-日曜日">9.29 (日曜日)</span></h3><blockquote>
<h4><span id="難波八阪神社1901000-jpy">難波八阪神社（190+1000 JPY）</span></h4><p>8:00左右起床 看是否有早餐吃 没有也没关系，办理退房手续checkout</p>
<p>9:00左右 步行至心齋橋站 乘御堂筋線（各站停車天王寺）</p>
<p>心齋橋站 - 難波站 约1分钟</p>
<p>记得先去老爺爺蛋糕店买个蛋糕，带去難波八阪神社边吃</p>
<p>然后步行至難波八阪神社，29日可能都需要拉行李箱，看看能不能在奈良寄存</p>
<p>11:00左右 准备动身前往奈良，去奈良也是和去神户一样，会遇到周游卷的问题，但大概1小时内能到达的</p>
<p>我走的是大和路线（JR）</p>
</blockquote>
<blockquote>
<h4><span id="奈良公園amp東大寺amp春日大社6805170960-jpy">奈良公園&amp;東大寺&amp;春日大社（<del>680</del>+5170+<del>960</del> JPY）</span></h4><p>12:00 抵达奈良 “近鐵奈良駅內有不少儲物櫃，方便旅客寄存行李” 不知道奈良站如何</p>
<p>存好东西 开吃 近鐵奈良步行150米前往すき焼きと牛まぶし ももしき（没预约上，可能要去茶屋吃）</p>
<p>13:30 前往奈良公园看鹿 然后抛个硬币看是先向北去東大寺 还是向南一路去春日大社</p>
<p>17:30 结束在奈良的旅程，该前往京都啦，去京都也是和去奈良一样，会遇到周游卷的问题，但大概1小时内能到达的（记得取行李！）</p>
<p>我走的是奈良线（JR） - 京阪本线</p>
</blockquote>
<blockquote>
<h4><span id="京都四條河原町rb酒店170-jpy">京都四條河原町Ｒ＆Ｂ酒店（170 JPY）</span></h4><p>18:30 左右到达京都 应该是在东福寺 换乘京阪本線（准急出町柳）</p>
<p>东福寺 - 祗園四條 约5分钟 然后过桥（四条大橋或団栗橋）步行约550米</p>
<p>到达京都四條河原町Ｒ＆Ｂ酒店办理入住checkin</p>
</blockquote>
<blockquote>
<h4><span id="先斗町amp祇園amp八坂神社1000-2000-jpy">先斗町&amp;祇園&amp;八坂神社（1000-2000 JPY）</span></h4><p>19:30 从 R&amp;B 步行前往牛排丼 Red Rock 吃晚饭</p>
<p>20:30 沿先斗町散步，经四条大橋往祇園，看八坂神社夜景</p>
<p>（也看看要不要在三条兑京都觀光乘車券 第二天用）</p>
<p>22:00 返回 R&amp;B</p>
</blockquote>
<h3><span id="930-月曜日">9.30 (月曜日)</span></h3><blockquote>
<h4><span id="鴨川三角洲amp出町桝形商店街230-jpy">鴨川三角洲&amp;出町桝形商店街（<del>230</del>+？ JPY）</span></h4><p>7:30 起床吃早饭 8:30左右就可以出发了 从祗園四條乘京阪本線（各站停車出町柳）（注意“急”）</p>
<p>祗園四條 - 出町柳 约6分钟 踏石过河 鴨川算是圣地巡礼打卡了</p>
<p>9:00 沿出町桥步行至出町桝形商店街，听说有些小东西，可以尝试买买？其实也是巡礼的一部分，可以对照看看</p>
</blockquote>
<blockquote>
<h4><span id="伏見稻荷大社2802000-3000-jpy">伏見稻荷大社（<del>280</del>+2000-3000 JPY）</span></h4><p>11:00 从出町柳出发 乘京阪本線（準急行淀屋橋）</p>
<p>出町柳 - 伏見稻荷 约14分钟 旁边就是炸牛排 京都勝牛 伏見稻荷店</p>
<p>12:00左右 吃完 即可观访伏見稻荷大社</p>
</blockquote>
<blockquote>
<h4><span id="京都动画工作室amp宇治橋20019015003501000-2000-jpy">京都动画工作室&amp;宇治橋（？<del>+200+190</del>+1500<del>+350</del>+1000-2000 JPY）</span></h4><p>伏見稻荷大社出口有一家花店 なかやまフローリスト 可以买一点后用</p>
<p>14:00 从稻荷車站出发，乘奈良線（各站停車奈良）</p>
<p>稻荷車站 - 六地藏（ＪＲ、京都市營地下鐵） 约8分钟</p>
<p>从六地藏沿府道128号步行400米即到达京都第一动画工作室遗址</p>
<p>14:30 可以选择继续步行前往第二工作室和本社 约18+6分钟</p>
<p>也可以从六地藏（京阪） 乘京阪宇治線（各站停車宇治（京阪））</p>
<p>六地藏（京阪） - 木幡（京阪） 约1分钟</p>
<p>15:30 可以继续从木幡駅 乘奈良線（各站停車奈良）</p>
<p>木幡駅 - 宇治駅 约5分钟</p>
<p>实际上想怎么坐怎么坐，因为两张券同时再次生效（JR、KH）</p>
<p>朝あがた通り&#x2F;宇治川ライン&#x2F;府道3号 步行约13分钟 抵达宇治日の出園</p>
<p>17:00 左右 过宇治橋至宇治（京阪） 乘京阪宇治線（各站停車中書島）</p>
<p>宇治（京阪） - 中書島 约14分钟 站内换乘京阪本線各站停車出町柳</p>
<p>中書島 - 三條（京都） 约20分钟 然后步行去豚ゴリラ 新京極六角店</p>
<p>18:00 吃猪扒饭（POP子 and PIPI美！）</p>
<p>19:00 吃完，步行回R&amp;B（感觉晚上时间还很多，可以想想加点啥）</p>
</blockquote>
<h3><span id="101-火曜日">10.1 (火曜日)</span></h3><blockquote>
<h4><span id="清水寺amp高台寺230-jpy">清水寺&amp;高台寺（230 JPY）</span></h4><p>6:30 起床吃早饭 7:30左右步行前往清水寺 约30分钟</p>
<p>10:30 前往清水道 乘86 City Bus&#x2F;206 City Bus</p>
<p>清水道 - 京都站前 约17分钟 换乘山阴本线（园部）</p>
<p>京都站 - 嵯峨岚山 约11分钟 后步行前往竹林小径</p>
</blockquote>
<blockquote>
<h4><span id="嵐山竹林小徑amp嵯峨野観光鉄道19602000-3000-jpy">嵐山竹林小徑&amp;嵯峨野観光鉄道（1960+2000-3000 JPY）</span></h4><p>12:00 左右 经嵐山竹林小徑 往遊覽小火車嵐山去</p>
<p>乘观光铁道前往小火車龜岡車站 步行850米至鮨彦（或丸玉飯店）吃午饭</p>
<p>14:00 略微逛一下，就可以从小火車龜岡車站 乘观光铁路回嵯峨嵐山站</p>
</blockquote>
<blockquote>
<h4><span id="渡月桥amp天龍寺4702404000-5000-jpy">渡月桥&amp;天龍寺（<del>470</del>240+4000-5000 JPY）</span></h4><p>15:00 渡月桥&amp;天龍寺逛就完了</p>
<p>18:00 前往岚山（阪急） 乘阪急岚山线（桂）</p>
<p>岚山（阪急） - 桂 后站内换乘阪急京都线（京都河原町）（注意“急”）</p>
<p>桂 - 京都河原町 共约35分钟 还能玩玩</p>
<p>19:30 步行即可到达燒肉放題（其实自助2小时，最好吃满，1号晚上可以去吃王记烧烤）</p>
<p>21:30 步行回到 R&amp;B</p>
</blockquote>
<h3><span id="102-水曜日">10.2 (水曜日)</span></h3><blockquote>
<h4><span id="天橋立2305200-jpy">天橋立（230<del>+5200</del> JPY）</span></h4><p>6:30 起床（感觉是在京都起最早的一天，没有早餐的话可能需要前一天晚上去便利店备一些） </p>
<p>7:30 步行350米至河原町松原 乘205 City Bus&#x2F;105 City Bus&#x2F;4 City Bus&#x2F;7 City Bus&#x2F;五条通5 City Bus&#x2F;松ヶ崎4 City Bus</p>
<p>河原町松原 - 京都車站前 约12分钟 再步行130米进京都車站</p>
<p>8:30 乘 JR 橋立 </p>
<p>京都駅 - 天橋立駅 在这里我要说清楚，有更便宜的方式去天橋立，乘高速巴士，但是一我晕车，二也想乘火车补一下不去东京的火车旅途，所以赶 8:38 的 JR</p>
<p>10:40 到达天橋立駅 经大天橋步行3.2公里 约44分钟 过丹後天橋立大江山國定公園 到达江尻（バス）</p>
</blockquote>
<blockquote>
<h4><span id="伊根舟屋2002000-400020048002204000-5000-jpy">伊根舟屋（200+2000-4000+200+4800+220+4000-5000 JPY）</span></h4><p>12:00 从江尻（バス） 乘蒲入線</p>
<p>江尻（バス） - 伊根（バス） 约29分钟</p>
<p>13:00 在伊根选饭店吃饭（FUNAYA KAJIYA 神慈や或お食事処 兵四楼）</p>
<p>还可以继续往下逛去看看 BiS Dogg 到底有没有开业</p>
<p>16:00 从伊根（バス）出发 乘蒲入线（上宫津行）</p>
<p>伊根（バス） -  江尻（バス）约30分</p>
<p>16:30 从天橋立走去天桥立站</p>
<p>18:09 天橋立 - 二条 约两小时 换乘东西线（六地藏（JR、京都市营地铁）） </p>
<p>二条（京都） - 三条京阪 约8分钟</p>
<p>去吃自助烤肉后步行回 R&amp;B</p>
</blockquote>
<h3><span id="103-木曜日">10.3 (木曜日)</span></h3><blockquote>
<h4><span id="京都國際漫畫博物館amp锦市场12004000-5000-jpy">京都國際漫畫博物館&amp;锦市场（1200+4000-5000 JPY）</span></h4><p>8:30 起床 9:30 出发 步行经綾小路通和烏丸通&#x2F;国道367号 2公里约30分钟</p>
<p>记得看看酒店能不能存行李</p>
<p>10:00 准时进京都國際漫畫博物館 看到13:00</p>
<p>13:00 步行往锦市场、京菜味のむら 錦店 吃饭</p>
<p>14:00 步行回一趟 R&amp;B 取行李</p>
</blockquote>
<blockquote>
<h4><span id="關西國際機場2190230-jpy">關西國際機場（<del>2190</del>230+？ JPY）</span></h4><p>14:30 从河原町松原出发 乘4 City Bus&#x2F;7 City Bus&#x2F;五条&#x2F;205 City Bus</p>
<p>河原町松原 - 京都站前 然后乘 JR HARUKA（关西机场 特急）</p>
<p>14:58 京都站 - 关西机场 共1小时30分左右</p>
<p>17:00 饿了看看有没有K记&#x2F;M记，飞机上也有一餐，回国！</p>
</blockquote>
<blockquote>
<h4><span id="臨空城amp电电城">臨空城&amp;电电城</span></h4><p>从时间安排（必须要预留足够多的时间候机）来看，10.3下午去电电城买东西可能不太现实，可能真得考虑临空城带点东西回来……</p>
<p>但是啊，现在看最好是第一次去电电城时买点，不然真的没啥时间</p>
</blockquote>
<h2><span id="归来小结">归来小结</span></h2><blockquote>
<p>总花费、细节和感受，待记</p>
</blockquote>


        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Chaos/" rel="tag">Chaos</a><a class="tag-none-link" href="/tags/New-Start/" rel="tag">New Start</a><a class="tag-none-link" href="/tags/Trip/" rel="tag">Trip</a>
            </div>
        

    </section>
</article>
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/06/13/Win11-Network-Bypass/">
                win11系统第一次开机跳过联网的办法（３种方法）
            </a>
        </h2>
    
    <time>
        Jun 13, 2024
    </time>
    <section class="content">
        <h1><span id="win11系统第一次开机跳过联网的办法3种方法">win11系统第一次开机跳过联网的办法（３种方法）</span></h1><blockquote>
<p>本文转自<a target="_blank" rel="noopener" href="https://blog.csdn.net/jaray/article/details/130722929">jaray</a> 并作补充</p>
<p>预装Win11家庭中文版由于微限制必须要联网激活，需要使用微软账户登入才可以继续开机过程，联网后系统会自动激活。</p>
<p>　　新电脑，安装以后，会要求激活，我打电话问了厂家，居然告诉我，让我用新电脑连手机，使用手机的热点，去激活电脑。在没有网络的情况下，现在连电脑都无法激活，厂家这么说，我不知道是他们不愿意说，还是真的不知道，我是无法相信这种说法，我在网上搜了很多方法，带图的，结束“调出任务管理器找到 Network Connection Flow进程”，这种方法是不行的，根本没有这个进程。</p>
<p>　　还有一种方法是：打开任务管理器，这个打开方法下面有，简单看完各个硬件参数，这个方法也扯了。</p>
<p>　　由于很多厂家基本都是联网后就不符合无理由退货的条件了，所以我整理了以下的几种跳过联网的办法，可以参考。</p>
</blockquote>
<h2><span id="一-win11初次开机跳过联网激活方法1">一、win11初次开机跳过联网激活方法1</span></h2><blockquote>
<p>1、按下Shift+F10或者是Fn+Shift+F10快捷键调出命令提示符窗口;</p>
<p>2、输入taskmgr，并按下回车键;</p>
<p>3、接着就会出现任务管理器页面，我们点击“详细信息”;</p>
<p>4、找到“Network Connection Flow”进程或者是“网络连接流”进程，点击“结束任务”;</p>
<p>5、这样就可以跳过联网；</p>
<p>６、这种方法就是上面我提到过的方法，我这台电脑也不行。</p>
</blockquote>
<h2><span id="二-win11初次开机跳过联网激活方法2">二、win11初次开机跳过联网激活方法2</span></h2><blockquote>
<p>1、首次进入Windows11家庭版系统并进行设置，到联网界面，按下【Shift+F10】快捷键（无效可试下【FN+Shfit+F10】）</p>
<p>2、在出现的命令提示符页面输入OOBE\BYPASSNRO，按回车键，等待电脑重启完成</p>
<p>3、重启后，在联网界面会有“我没有Internet连接”选项，点击此选项即可跳过联网</p>
</blockquote>
<h2><span id="三-通过修改注册表跳过联网界面3">三、通过修改注册表跳过联网界面３</span></h2><blockquote>
<p>１、按Shift键+F10键（不成功按Fn+Shift+F10）；</p>
<p>２、弹出命令提示符窗口，输入regedit回；</p>
<p>３、然后在打开的注册表编辑器界面中，找到下方路径——计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\OOBE</p>
<p>４、接下来在注册表的右侧空白处鼠标右键，在弹出的右键菜单项中，新建一个DWORD(32位)值(D)。新建的值重命名为: BypassNRO，双击打开BypassNRO这个值，然后在编辑DWORD(32位)值窗口，将数值数据修改为【1】，再点击【确定】；</p>
<p>５、最后在cmd窗口再输入命令：logoff，回车；</p>
<p>６、可以跳过联网。</p>
<p>end.</p>
</blockquote>


        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Bypass/" rel="tag">Bypass</a><a class="tag-none-link" href="/tags/Reprint/" rel="tag">Reprint</a>
            </div>
        

    </section>
</article>
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/06/13/SourceMap-Reverse/">
                sourcemap文件泄露漏洞
            </a>
        </h2>
    
    <time>
        Jun 13, 2024
    </time>
    <section class="content">
        <h1><span id="sourcemap文件泄露漏洞">sourcemap文件泄露漏洞</span></h1><blockquote>
<p>本文转自<a target="_blank" rel="noopener" href="https://blog.csdn.net/u011975363/article/details/125694154">小心灵呀</a> 并作补充</p>
<p>最近进行<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95&spm=1001.2101.3001.7020">渗透测试</a>时，时常遇到xray扫出sourcemap文件，每次扫到都要百度，因此做个笔记。</p>
</blockquote>
<h2><span id="漏洞原理">漏洞原理</span></h2><blockquote>
<p>在日常测试时，经常会遇到以js.map为后缀的文件<br>这是jQuery中的一个新功能，支持Source Map<br>非常多Webpack打包的站点都会存在js.map文件.<br>通过sourcemap可还原前端代码找到API,间接性获取未授权访问漏洞</p>
<p>什么是Source map<br>简单说，Source map就是一个信息文件，里面储存着位置信息。转换后的代码的每一个位置，所对应的转换前的位置。<br>有了它，出错的时候，除错工具将直接显示原始代码，而不是转换后的代码,这无疑给开发者带来了很大方便。</p>
</blockquote>
<h2><span id="漏洞复现">漏洞复现</span></h2><blockquote>
<p>使用<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=xray&spm=1001.2101.3001.7020">xray</a>扫到 dirscan&#x2F;sourcemap&#x2F;default 漏洞。</p>
<p><img src="/2024/06/13/SourceMap-Reverse/1.png" alt="image"></p>
<p>直接访问链接可下在sourcemap文件，利用该文件还原源代码需使用reverse-sourcemap工具。<br>先安装：nodejs，<br>下载地址：<a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn/download/">https://nodejs.org/zh-cn/download/</a><br>选择适合自己操作系统的版本：</p>
<p><img src="/2024/06/13/SourceMap-Reverse/2.png" alt="image"></p>
<p>双击下载后的文件，一路点击 next即可成功安装</p>
<p><img src="/2024/06/13/SourceMap-Reverse/3.png" alt="image"></p>
<p>安装完nodejs后，控制台输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></table></figure>

<p>即可查看安装的版本。</p>
<p><img src="/2024/06/13/SourceMap-Reverse/4.png" alt="image"></p>
<p>然后安装 reverse-sourcemap</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global reverse-sourcemap</span><br></pre></td></tr></table></figure>

<p>安装完成（PS：我电脑中已经有reverse-sourcemap，所以大家如果为初次安装看到信息可能跟我不一样）。</p>
<p><img src="/2024/06/13/SourceMap-Reverse/5.png" alt="image"></p>
<p>安装完成后，将其加入环境变量</p>
<p><img src="/2024/06/13/SourceMap-Reverse/6.png" alt="image"></p>
<p>检查是否安装成功：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reverse-sourcemap -h</span><br></pre></td></tr></table></figure>

<p>安装成功</p>
<p><img src="/2024/06/13/SourceMap-Reverse/7.png" alt="image"></p>
<p>还原map文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reverse-sourcemap -v ****.js.map -o output</span><br></pre></td></tr></table></figure>

<p>map文件会还原到 output文件</p>
<p>同时还可以通过浏览器，开发者模式-source模块查看前端源代码</p>
<p><img src="/2024/06/13/SourceMap-Reverse/8.png" alt="image"></p>
</blockquote>
<h2><span id="漏洞修复">漏洞修复</span></h2><blockquote>
<p>临时的解决方法就是删除代码目录下的.map文件；<br>永久的解决方法就是在build的时候禁用产生map文件的功能；<br>在scripts&#x2F;build下的build.js 文件中添加如下配置：<br>process.env.GENERATE_SOURCEMAP &#x3D; ‘false’;<br>重新build就不会再产生sourcemap文件了</p>
</blockquote>
<h2><span id="参考资料">参考资料</span></h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1981398">如何还原前端代码</a></p>
</blockquote>


        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Exploit/" rel="tag">Exploit</a><a class="tag-none-link" href="/tags/Reprint/" rel="tag">Reprint</a><a class="tag-none-link" href="/tags/Reverse/" rel="tag">Reverse</a><a class="tag-none-link" href="/tags/SourceMap/" rel="tag">SourceMap</a>
            </div>
        

    </section>
</article>
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/06/13/SonarQube-Unravel/">
                SonarQube-破解
            </a>
        </h2>
    
    <time>
        Jun 13, 2024
    </time>
    <section class="content">
        <h1><span id="sonarqube-破解">SonarQube-破解</span></h1><blockquote>
<p>本文转自<a target="_blank" rel="noopener" href="https://bbs.kanxue.com/thread-273289.htm">ny0c</a> 并作补充</p>
</blockquote>
<h2><span id="新版sonarqube破解">新版SonarQube破解</span></h2><blockquote>
<p>软件版本: sonarqube-9.8.0.63668<br>Java版本: jdk11<br>Agent版本: 1.2</p>
<p>帖子上有人求新版破解,花了点时间搞定了通杀的,已经测试过8.9.8 LTS跟9.8.0最新版（笔者注：事实上10.x的版本也可以进行破解）</p>
</blockquote>
<h2><span id="使用说明">使用说明</span></h2><blockquote>
<p>1、把下列信息全部复制,然后base64加密后的内容就是<strong>license</strong>,注意要包括换行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Company=Unknown</span><br><span class="line">Digest=NotRequired</span><br><span class="line">Edition=Enterprise</span><br><span class="line">EditionLabel=Enterprise</span><br><span class="line">Expiration=2099-01-01</span><br><span class="line">MaxLoc=9223372036854775806</span><br><span class="line">Plugins=abap,cpp,plsql,security,sonarapex,swift,tsql,vbnet,cobol,pli,rpg,vb</span><br><span class="line">Features=*</span><br><span class="line">ServerId=*</span><br><span class="line">Support=false</span><br><span class="line">Type=ny0c</span><br></pre></td></tr></table></figure>

<p><img src="/2024/06/13/SonarQube-Unravel/1.png" alt="image"></p>
<p>2、修改SonarQube启动参数<br>解压从官方下载压缩包,根据自身需求配置好数据库链接<br>然后修改<strong>sonarqube-版本号&#x2F;conf&#x2F;sonar.properties</strong>的内容<br>其中</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sonar.web.javaOpts=-Xmx1G -Xms128m -XX:+HeapDumpOnOutOfMemoryError</span></span><br></pre></td></tr></table></figure>

<p>改成</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sonar.web.javaOpts</span>=<span class="string">-javaagent:/你的agent目录/SonarQubeAgent-1.2-SNAPSHOT.jar -Xmx1G -Xms128m -XX:+HeapDumpOnOutOfMemoryError</span></span><br></pre></td></tr></table></figure>

<p>以及</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sonar.ce.javaOpts=-Xmx2G -Xms128m -XX:+HeapDumpOnOutOfMemoryError</span></span><br></pre></td></tr></table></figure>

<p>改成</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sonar.ce.javaOpts</span>=<span class="string">-javaagent:/你的agent目录/SonarQubeAgent-1.2-SNAPSHOT.jar -Xmx2G -Xms128m -XX:+HeapDumpOnOutOfMemoryError</span></span><br></pre></td></tr></table></figure>



<p>3、启动sonarqube<br>根据官方文档设置好sonarqube后,直接<code>sonar.sh console</code>启动控制台模式,看到<strong>app[][o.s.a.SchedulerImpl] Process[web] is up</strong>后,sonarqube启动成功</p>
<p>4、设置license<br>浏览器打开 <strong><a href="http://sonarqube-IP地址:sonarqube-端口/">http://sonarqube-IP地址:sonarqube-端口/</a></strong> 设置或者登录sonarqube,然后点击最顶上的<em>Administration</em>选项卡,然后点击下面的<em>Configuration</em>,选择<em>License Manager</em>,接着设置License即可</p>
<p><img src="/2024/06/13/SonarQube-Unravel/2.png" alt="image"></p>
</blockquote>
<h2><span id="旧帖">旧帖</span></h2><blockquote>
<p>SonarQube其实很早之前就被我刀了,一直没有机会放出来,理论上能干整个 8.9.x LTS,具体版本是enterprise.</p>
<p>说实在的,看雪真是好地方啊,今天burp破解秒审核通过,那这个我也发了把,具体思路不大记得了,反正也是挺痛苦的过程,等我有时间再补把.</p>
<p>原版 SonarQube Enterprise Edition 8.9.8 LTS<a target="_blank" rel="noopener" href="https://binaries.sonarsource.com/CommercialDistribution/sonarqube-enterprise/sonarqube-enterprise-8.9.8.54436.zip">下载地址</a></p>
<p>用法很简单,直接加个javaagent到sonarqube-xxxx&#x2F;conf&#x2F;sonar.properties里面,注意web跟ce两个地方都要加</p>
<p>License编码方式<br>请保留换行,然后整体base64即可</p>
<p>补个图把</p>
<p><img src="/2024/06/13/SonarQube-Unravel/3.png" alt="image"></p>
<p><img src="/2024/06/13/SonarQube-Unravel/4.png" alt="image"></p>
<p>老规矩,不混淆,不加密,有兴趣的自己拆来看.</p>
</blockquote>
<h2><span id="上传的附件">上传的附件</span></h2><blockquote>
<p><a href="https://szczecin.github.io/2024/06/13/SonarQube-Unravel/SonarQubeAgent-1.1-SNAPSHOT.jar">SonarQubeAgent-1.1-SNAPSHOT.jar</a></p>
<p><a href="https://szczecin.github.io/2024/06/13/SonarQube-Unravel/SonarQubeAgent-1.2-SNAPSHOT.jar">SonarQubeAgent-1.2-SNAPSHOT.jar</a></p>
<p><a href="https://szczecin.github.io/2024/06/13/SonarQube-Unravel/SonarQubeAgent-1.2-src.zip">SonarQubeAgent-1.2-src.zip</a></p>
</blockquote>


        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Reprint/" rel="tag">Reprint</a><a class="tag-none-link" href="/tags/SonarQube/" rel="tag">SonarQube</a><a class="tag-none-link" href="/tags/Unravel/" rel="tag">Unravel</a>
            </div>
        

    </section>
</article>
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/05/29/Silence/">
                Silence-赫默
            </a>
        </h2>
    
    <time>
        May 29, 2024
    </time>
    <section class="content">
        <h1><span id="silence-赫默">Silence-赫默</span></h1><p><img src="/2024/05/29/Silence/1.png" alt="image"></p>
<blockquote>
<p>诶，我看到这个皮肤的时候，整个人脑内立刻就是下面这张表情包了：</p>
</blockquote>
<p><img src="/2024/05/29/Silence/2.png" alt="image"></p>
<blockquote>
<p>因为是开服第一个五星，因为和过去某位很像，因为一起度过了艰难的岁月，因为内心目前仍有歉意，所以赫默确实是我很喜欢的角色……</p>
<p>所以我 Pixiv 上第一幅有关的明日方舟的画作才会是：<a target="_blank" rel="noopener" href="https://www.pixiv.net/artworks/76865361">一枚斑羽毛【A spotted feather】</a></p>
</blockquote>
<p><img src="/2024/05/29/Silence/3.png" alt="image"></p>
<blockquote>
<p>19年啊，晃眼5年过去了，该忘掉的没忘掉，所幸不该忘掉的也没怎么忘掉。</p>
<p>现在看板干员换了一个又一个，但我也没法说我厨哪个，只觉得这个角色可爱，吃这个人设和故事，摆上去一段时间，但更多的感情也没有了，所以是个假二次元（没有一个季度换一次老婆真对不起呢）</p>
<p>赫默有塞雷娅、伊芙利特、白面鸮陪着，实话是羡慕的，感觉自己也不配代替或成为其中任何一个位置……</p>
<p>写到这里刷刷手机发现“生路”的PV发了，一眼二队长新皮肤（感觉不如返航）</p>
</blockquote>
<p><img src="/2024/05/29/Silence/4.png" alt="image"></p>


        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Arknights/" rel="tag">Arknights</a><a class="tag-none-link" href="/tags/Picture/" rel="tag">Picture</a><a class="tag-none-link" href="/tags/Silence/" rel="tag">Silence</a>
            </div>
        

    </section>
</article>
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/05/29/Request-Resigned-2/">
                灰产-如何破解请求验签（下）
            </a>
        </h2>
    
    <time>
        May 29, 2024
    </time>
    <section class="content">
        <h1><span id="灰产-如何破解请求验签下">灰产-如何破解请求验签（下）</span></h1><p><img src="/2024/05/29/Request-Resigned-2/1.png" alt="image"></p>
<h2><span id="写在前面">写在前面</span></h2><blockquote>
<p>再来个前情提要：<a href="https://szczecin.github.io/2024/05/27/Request-Resigned-1/">灰产-如何破解请求验签（上）</a></p>
<p><strong>以下都是情节模拟，并非具体情况，请细加甄别</strong></p>
<p>阿哈！Showmak……啊不，是新的 Sign 替换后不久就，两周左右就又被破解了呢——</p>
<p>“我们新的加签，可是从多个随机数池取值生成的 sign1，然后把sign1和多个参数混合在一起按时间戳不同取模排列生成的sign2，怎么可能……”</p>
<p>啊，虽然很想吐槽这反派一般被反击了感叹自己部署被打乱了的感觉，但是来不及为已经逝去的 sign2 感到悲伤了，接下来赶到战场的是……</p>
<p>是我这个苦力！</p>
<p>我打灰产？真的假的？要上吗？</p>
<p><img src="/2024/05/29/Request-Resigned-2/2.png" alt="image"></p>
</blockquote>
<h2><span id="总而言之">总而言之</span></h2><blockquote>
<p>总而言之，在解释了旧 Sign 是怎么泄露的后，调查新 Sign 是怎么泄露的这个任务又又又落到我这里了&#x3D; &#x3D;，已经不想吐槽了</p>
</blockquote>
<h2><span id="实现漏洞">实现漏洞</span></h2><blockquote>
<p>“怎么实现的……额，实际上我们等于是接了一个生成库，你可以理解为类似SDK，里面有各种 Sign1 和 Sign2 的实现方式，什么移位啊取模啊都多久前的了，我都快忘了，你想看的话文档给你你可以看一下”</p>
<p>“有没有可能是这个实现的模块泄露了或者可以被调用啥的？”</p>
<p>“我觉得没有吧，感觉也有可能是 Hook 了，但就不知道是怎么弄的”</p>
<p>然后直到最后我除了在研发显示屏上看到了一眼实现文档，我再也没看到那实现方式一眼了</p>
<p><img src="/2024/05/29/Request-Resigned-2/3.png" alt="image"></p>
<p>摸索开始了——</p>
<p>首先通过请求日志我发现，灰产用到的 sign1 有一批量重复的（说好的随机池随机取呢），但是生成的 sign2 是不重复的（sign1 只作为一个参数参与生成 sign2 的计算），我们并没有对 sign1 进行校验，所以导致这个 sign1 可以在请求中被替换，重复利用。</p>
<p><del>顺带一提的是，在其他应用里很早就出现这个情况了，不是我的话都还没发现……</del></p>
<p><img src="/2024/05/29/Request-Resigned-2/4.png" alt="image"></p>
</blockquote>
<h2><span id="定向hook">定向Hook</span></h2><blockquote>
<p>sign1 的问题因为没有校验可以重复利用解决了，那 sign2 呢？</p>
<p>前端没有找到泄露 sign2 计算点，因为前端都可能没用新的 Sign；</p>
<p>应用端源码没看到 sign2 的计算方式，因为做了较好的混淆；</p>
<p>……</p>
<p>那选择就只有一个了！<del>（折断拐杖）</del></p>
<p>对它使用 Hook 吧！</p>
<p><img src="/2024/05/29/Request-Resigned-2/5.png" alt="image"></p>
<p>早在 <a href="https://szczecin.github.io/2024/01/19/MobSF/">MobSF移动安全测试框架|自动化静动态app分析框架</a> 的使用中，我就接触了 Frida，why？因为一开始装不上，并且因为种种原因（MobSF 自带证书冲突等）执行动态分析的效果很差，虽然后来还是能试出来。</p>
<p>扯远了，回到现在，利用 Frida 对应用进行 Hook，我是在 Genymotion 上做的，当然，由于应用配置的关系，你可能需要先：</p>
<ul>
<li>进行 ARM - X86 的转换才能跑起来应用，低版本 Android 不可运行要换成高版本转译：<a target="_blank" rel="noopener" href="https://github.com/niizam/Genymotion_A11_libhoudini">Genymotion_A11_libhoudini</a></li>
<li>高版本 Android 可以开启 SSL pinning 等，需要 Magisk + TrustMeAlready ：<a href="https://szczecin.github.io/2024/01/22/Genymotion-Install-Xposed:EdXposed:LSPosed:Magisk/">How to install Xposed&#x2F;EdXposed&#x2F;LSPosed + Magisk with Genymotion Desktop?</a></li>
<li>安装 Frida：<a href="https://szczecin.github.io/2024/05/27/Brida-Starting-From-Beginning/">brida从0配置</a></li>
</ul>
<p>这里就要说了，为什么涉及到 Brida？</p>
<p>因为一开始是想用 Brida 直接 Hook 调用函数，传到 BurpSuite 直接修改请求，但是后来发现你根本不知道是哪个函数计算 sign2 ，别说改了，Hook 都不知道 Hook 谁，怎么办？</p>
<p><img src="/2024/05/29/Request-Resigned-2/6.png" alt="image"></p>
</blockquote>
<h2><span id="javasecuritymessagedigest">java.security.MessageDigest</span></h2><blockquote>
<p>还记得旧 Sign 最后的加密算法吗？SHA1-Hash</p>
<p>再看看新 Sign，尤其是 sign2 的样式，分明也是 SHA1！</p>
<p>嘛，灵光一现：不如利用 js 跟踪“java.security.MessageDigest”的调用，并输出加密入参与之后的值，js 参考：</p>
<ul>
<li><a href="https://szczecin.github.io/2024/05/27/Android-Reverse-Frida-Hook/">安卓逆向 - Frida Hook（抓包实践）</a></li>
<li><a href="https://szczecin.github.io/2024/05/24/Frida-Hook-Signature/">Frida java层自吐加密算法</a></li>
</ul>
<p><img src="/2024/05/29/Request-Resigned-2/7.png" alt="image"></p>
<p>入参值反解出来是一堆字节码，需要用 java 重新转一下回去：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">exchange</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">byte</span>[] b = &#123; <span class="number">108</span>, ……, <span class="number">102</span>,</span><br><span class="line">               <span class="number">105</span>, ……, <span class="number">105</span>,</span><br><span class="line">               <span class="number">111</span>, ……, <span class="number">107</span>,</span><br><span class="line">               <span class="number">45</span>, ……, <span class="number">61</span>,</span><br><span class="line">               <span class="number">50</span>, ……, <span class="number">52</span>,</span><br><span class="line">               <span class="number">32</span>, ……, <span class="number">117</span>,</span><br><span class="line">               <span class="number">115</span>, ……, <span class="number">118</span>,</span><br><span class="line">               <span class="number">105</span>, ……, <span class="number">110</span>,</span><br><span class="line">               <span class="number">118</span>, ……, <span class="number">73</span>,</span><br><span class="line">               <span class="number">70</span>, ……, <span class="number">78</span>,</span><br><span class="line">               <span class="number">74</span>, ……, <span class="number">85</span>,</span><br><span class="line">               <span class="number">85</span>, ……, <span class="number">108</span>,</span><br><span class="line">               <span class="number">107</span>, ……, <span class="number">107</span>,</span><br><span class="line">               <span class="number">45</span>, ……, <span class="number">110</span>,</span><br><span class="line">               <span class="number">61</span>, ……, <span class="number">48</span>,</span><br><span class="line">               <span class="number">67</span>, ……, <span class="number">45</span>,</span><br><span class="line">               <span class="number">116</span>, ……, <span class="number">112</span>,</span><br><span class="line">               <span class="number">61</span>, ……, <span class="number">104</span>,</span><br><span class="line">               <span class="number">73</span>, ……, <span class="number">57</span> &#125;;</span><br><span class="line">       <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(b);</span><br><span class="line">       System.out.println(s);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">……data=&#123;<span class="string">&quot;userId&quot;</span>:<span class="string">&quot;……&quot;</span>&#125;……sign1=GORNJPBOGXJXZQRRKYKYZNGZXZSYOUUSCMCM……timestamp=<span class="number">1714030269543</span>……</span><br></pre></td></tr></table></figure>

<h2><span id="sign1amptimestamp">sign1&amp;timestamp</span></h2><blockquote>
<p>ok，入参也出来了，现在只剩一个问题：sign1 在入参中的位置。</p>
<p>其实到这里直接去遍历都可以，但是我还是采集了几份 sign1 在 sign2 生成位置与 timestamp 的关系进行比对，然后发现比对了个寂寞——差一位数的时间戳里 sign1 的插入位置可以相同的 &#x3D; &#x3D;：</p>
<p><img src="/2024/05/29/Request-Resigned-2/8.png" alt="image"></p>
<p>所以不整了，收工！</p>
<p><img src="/2024/05/29/Request-Resigned-2/9.png" alt="image"></p>
</blockquote>
<h2><span id="写在后面">写在后面</span></h2><blockquote>
<p>下篇也写完了，感觉好像也就这样，后续把加固啥的弄上议程吧，不然好像还有些硬编码问题也是头疼，但还要验证一下效果。</p>
<p>沉默，然后……事已至此，先吃（pao）饭（lu）吧</p>
<p><img src="/2024/05/29/Request-Resigned-2/10.gif" alt="image"></p>
</blockquote>
<h2><span id="参考引用">参考引用</span></h2><blockquote>
<p><a href="https://szczecin.github.io/2024/05/27/Request-Resigned-1/">灰产-如何破解请求验签（上）</a></p>
<p><a href="https://szczecin.github.io/2024/01/19/MobSF/">MobSF移动安全测试框架|自动化静动态app分析框架</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/niizam/Genymotion_A11_libhoudini">Genymotion_A11_libhoudini</a></p>
<p><a href="https://szczecin.github.io/2024/01/22/Genymotion-Install-Xposed:EdXposed:LSPosed:Magisk/">How to install Xposed&#x2F;EdXposed&#x2F;LSPosed + Magisk with Genymotion Desktop?</a></p>
<p><a href="https://szczecin.github.io/2024/05/27/Brida-Starting-From-Beginning/">brida从0配置</a></p>
<p><a href="https://szczecin.github.io/2024/05/27/Android-Reverse-Frida-Hook/">安卓逆向 - Frida Hook（抓包实践）</a></p>
<p><a href="https://szczecin.github.io/2024/05/24/Frida-Hook-Signature/">Frida java层自吐加密算法</a></p>
</blockquote>


        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Android/" rel="tag">Android</a><a class="tag-none-link" href="/tags/Chaos/" rel="tag">Chaos</a><a class="tag-none-link" href="/tags/Frida/" rel="tag">Frida</a><a class="tag-none-link" href="/tags/Hook/" rel="tag">Hook</a><a class="tag-none-link" href="/tags/Signature/" rel="tag">Signature</a>
            </div>
        

    </section>
</article>
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/05/27/Request-Resigned-1/">
                灰产-如何破解请求验签（上）
            </a>
        </h2>
    
    <time>
        May 27, 2024
    </time>
    <section class="content">
        <h1><span id="灰产-如何破解请求验签上">灰产-如何破解请求验签（上）</span></h1><p><img src="/2024/05/27/Request-Resigned-1/1.png" alt="image"></p>
<h2><span id="前情提要">前情提要</span></h2><blockquote>
<p>先来个前情提要：<a href="https://szczecin.github.io/2024/02/01/Apk-Resigned/">灰产-如何对APK修改后重签</a></p>
<p>在写那篇文章的我，是否会想到我竟然还有有关“灰产”的下文来写？而且就标题来说，还有分上下两篇！所以这4个月不到的时间我又经历了什么呢？</p>
<p><img src="/2024/05/27/Request-Resigned-1/2.png" alt="image"></p>
</blockquote>
<h2><span id="写在前面">写在前面</span></h2><blockquote>
<p><strong>以下都是情节模拟，并非具体情况，请细加甄别</strong></p>
<p>让我们把时间拨回到年后。</p>
<p>年后回来一阵子，接到业务风控同学的反馈，我们有用户发现自己的账户被盗了，自己购买了不是自己的商品（不产生金额）并对这个商品统一匿名评价……</p>
<p>我第一反应卧槽哥们我们应用不是做了端校验，不同设备必须验证码登录，怎么连手机一起丢了才有后面能说漏洞导致账密泄漏的事？</p>
<p><img src="/2024/05/27/Request-Resigned-1/3.png" alt="image"></p>
<p>后面通过网关日志、应用日志、接口日志等排查，发现这个用户的登录凭证（token）有从境外服务器请求服务的情况，可以基本确认是 token 的泄漏；</p>
<p>再和用户沟通以及进一步的深入排查，我们发现 token 的泄漏源于用户被钓鱼，这里细节不表；被社工得到的 token 会先从 ip 1 被收集并转发给 ip 2 进行购买请求与评论……</p>
<p>这里涉及到一个问题，我们的请求在各端做了验签，Sign 参数会根据不同端走不同的计算方式，想要更改 token 并发起购买请求，不重新计算 Sign是不可能通过校验的，只有两种可能：</p>
<ul>
<li>我们的 Sign 计算方式被破解</li>
<li>我们的 Sign 计算方式可被任意调用</li>
</ul>
</blockquote>
<h2><span id="总而言之">总而言之</span></h2><blockquote>
<p>总而言之，这个任务又落到我这里了&#x3D; &#x3D;</p>
<p>会议讨论对齐的时候，研发一致认为是在 H5 端的 Sign 计算方式太简单了，如何计算已经被破解，应该换上现在端上更安全的 Sign 计算就可以了！</p>
<p>直接破解一个计算方法理论上是不太容易的，我更在意的是是否是哪个地方泄漏了 Sign 的计算方法，或者在什么地方的计算代码可以被调用，直接入参入值然后得到结果。</p>
<p>但这里就要提到另一个事情了，研发不告诉你！</p>
<p>他们只表述这个好像比较简单就能破，但问他们怎么破的，不知道；问他们在哪里可能泄漏了，不知道：</p>
<p>“大概是从前端 JS 泄漏的？你看我们这里都做了混淆了，你看是不是就是这个位置，sign 关键词都命中了……”“可是为啥我调试&#x2F;下断点没反应啊？”</p>
<p><img src="/2024/05/27/Request-Resigned-1/4.png" alt="image"></p>
<p>后来嘛，在把钓鱼的口子堵了一下后，换上“更安全”的 Sign 计算方式后，喜闻乐见的钓鱼的口子也被绕过了，“更安全”的 Sign 计算也被破解了……</p>
<p>然后呢？</p>
<p>遭殃的还是我好吧，本来他们都认为可行的解决办法没用的时候，我就不得不花时间和精力来看看不在我 OKR 上的问题了</p>
<p><img src="/2024/05/27/Request-Resigned-1/5.png" alt="image"></p>
</blockquote>
<h2><span id="泄漏发现">泄漏发现</span></h2><blockquote>
<p>算研发很配合安全工作，虽然告诉了我一个错误的泄漏位置，但起码提醒了我可能是 JS 就已经泄露了，没必要一来就去逆向找源码。</p>
<p>开始的思路还是去利用前端给到的 JS 复用：<a href="https://szczecin.github.io/2024/05/21/JSFlash-BurpSuite/">Burp Suite作为代理，复用目标站点的js代码处理指定的内容</a></p>
<p>后来发现 JSFlash 必须要能够指定调用代码函数才行，前端 JS 混淆了，指向不出来，直接分析不了</p>
<p>然后我就在前端登录页 Source - js 找到了 Sign 计算点，并且下断点步进调试看到了所有 Sign 的计算入参：</p>
<p><img src="/2024/05/27/Request-Resigned-1/6.png" alt="image"></p>
<p><img src="/2024/05/27/Request-Resigned-1/7.png" alt="image"></p>
</blockquote>
<h2><span id="它端验证">它端验证</span></h2><blockquote>
<p>在前端 JS 调试的过程中能看到有一个 secret 参数是不会暴露在 request 里的，其他端的如何获得？</p>
<p>Jadx 逆向反编译一下应用端，以 SIGN 为关键词，在源代码中发现了硬编码在其他端使用的 secret，以及使用的 Sign 最后加签算法：</p>
<p><img src="/2024/05/27/Request-Resigned-1/8.png" alt="image"></p>
<p><img src="/2024/05/27/Request-Resigned-1/9.png" alt="image"></p>
</blockquote>
<h2><span id="写在后面">写在后面</span></h2><blockquote>
<p>上篇就到这里，写的好像很简单，解过程也没遇到什么麻烦，但是还得说和大伙配合的还是不好，我还是认为不管是锻炼或者检验个人能力也好，工作任务忙不想接手深入这个事情也好，如果是以把事情完成的结论来说，相互配合是很重要的。</p>
<p>以旧 Sign 为例，大家说的好像每个人都知道这个是怎么生成的，但就是没人和你说，告诉的还是错误的位置，即使真的可能知道是怎么生成的不知道是在哪里泄露的，那信息汇通还是更重要的。研发完全可以告诉你“我猜是在前端 JS 泄漏的，位置是在这里，他的调用是这样的……”给你演示出来，如果真的在前端直接 Debug 下断点走一遍，就会知道一开始的位置告诉错了，并且一下就把泄漏点找出来了。</p>
<p>不会浪费双方的时间的。</p>
<p><img src="/2024/05/27/Request-Resigned-1/10.png" alt="image"></p>
</blockquote>
<h2><span id="参考引用">参考引用</span></h2><blockquote>
<p><a href="https://szczecin.github.io/2024/02/01/Apk-Resigned/">灰产-如何对APK修改后重签</a></p>
<p><a href="https://szczecin.github.io/2024/05/21/JSFlash-BurpSuite/">Burp Suite作为代理，复用目标站点的js代码处理指定的内容</a></p>
</blockquote>


        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Android/" rel="tag">Android</a><a class="tag-none-link" href="/tags/Chaos/" rel="tag">Chaos</a><a class="tag-none-link" href="/tags/Frida/" rel="tag">Frida</a><a class="tag-none-link" href="/tags/Hook/" rel="tag">Hook</a><a class="tag-none-link" href="/tags/Signature/" rel="tag">Signature</a>
            </div>
        

    </section>
</article>
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/05/27/Android-Reverse-Frida-Hook/">
                安卓逆向 - Frida Hook（抓包实践）
            </a>
        </h2>
    
    <time>
        May 27, 2024
    </time>
    <section class="content">
        <h1><span id="安卓逆向-基础入门教程">安卓逆向 - 基础入门教程</span></h1><blockquote>
<p>本文转自<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42840266/article/details/132279975">小馒头yy</a> 并作补充</p>
</blockquote>
<h2><span id="一-引言">一、引言</span></h2><blockquote>
<p>上篇文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42840266/article/details/132080000">安卓逆向 - 基础入门教程_小馒头yy的博客-CSDN博客</a> 介绍了Frida的安装、基本使用，今天我们来看看Frida常用Hook和基于Frida抓包实践。</p>
</blockquote>
<h2><span id="二-frida常用-hook脚本">二、Frida常用 Hook脚本</span></h2><blockquote>
<p>1、hook java.net.URL</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hook1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable constant_">URL</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&#x27;java.net.URL&#x27;</span>);</span><br><span class="line">    <span class="variable constant_">URL</span>.<span class="property">$init</span>.<span class="title function_">overload</span>(<span class="string">&#x27;java.lang.String&#x27;</span>).<span class="property">implementation</span> = <span class="keyword">function</span> (<span class="params">a</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;加密前：&#x27;</span> + a)</span><br><span class="line">        <span class="title function_">showStacks</span>()</span><br><span class="line">        <span class="variable language_">this</span>.$init(a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、hook okhttp3 HttpUrl</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hookOkhttp3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="title class_">Builder</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&#x27;okhttp3.Request$Builder&#x27;</span>);</span><br><span class="line">    <span class="title class_">Builder</span>.<span class="property">url</span>.<span class="title function_">overload</span>(<span class="string">&#x27;okhttp3.HttpUrl&#x27;</span>).<span class="property">implementation</span> = <span class="keyword">function</span> (<span class="params">a</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a: &#x27;</span> + a)</span><br><span class="line">        <span class="keyword">var</span> res = <span class="variable language_">this</span>.<span class="title function_">url</span>(a);</span><br><span class="line">        <span class="title function_">showStacks</span>()</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res: &quot;</span> + res)</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、hook okhttp3 addHeader</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hook</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="title class_">Builder</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;okhttp3.Request$Builder&quot;</span>);</span><br><span class="line">    <span class="title class_">Builder</span>[<span class="string">&quot;addHeader&quot;</span>].<span class="property">implementation</span> = <span class="keyword">function</span> (<span class="params">str, str2</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;key: &quot;</span> + str)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;val: &quot;</span> + str2)</span><br><span class="line">        <span class="title function_">showStacks</span>()</span><br><span class="line">        <span class="keyword">var</span> result = <span class="variable language_">this</span>[<span class="string">&quot;addHeader&quot;</span>](str, str2);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result: &quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、打印堆栈</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">showStacks</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Java</span>.<span class="title function_">perform</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;android.util.Log&quot;</span>).<span class="title function_">getStackTraceString</span>(<span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;java.lang.Exception&quot;</span>).$new()));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5、hook Base64</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hookBase</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Base64</span></span><br><span class="line">    <span class="keyword">var</span> <span class="title class_">Base64Class</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;android.util.Base64&quot;</span>);</span><br><span class="line">    <span class="title class_">Base64Class</span>.<span class="property">encodeToString</span>.<span class="title function_">overload</span>(<span class="string">&quot;[B&quot;</span>, <span class="string">&quot;int&quot;</span>).<span class="property">implementation</span> = <span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> rc = <span class="variable language_">this</span>.<span class="title function_">encodeToString</span>(a, b);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;&gt;&gt;&gt; Base64 &quot;</span> + rc);</span><br><span class="line">        <span class="keyword">return</span> rc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6、hook HashMap</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hookMap</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="title class_">Build</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;java.util.HashMap&quot;</span>);</span><br><span class="line">    <span class="title class_">Build</span>[<span class="string">&quot;put&quot;</span>].<span class="property">implementation</span> = <span class="keyword">function</span> (<span class="params">key, val</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;key : &quot;</span> + key)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;val : &quot;</span> + val)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">put</span>(key, val)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2><span id="三-某麦网抓包实践">三、某麦网抓包实践</span></h2><blockquote>
<p>本篇以某麦网帖子详情接口，演示如何基于Frida hook抓包</p>
<p>1、安装某麦网8.<em>.</em>.apk</p>
<p>2、搭建Frida hook 环境，注入 hook java.net.URL脚本</p>
<p>3、点进帖子详情打印出如下堆栈，我们可以根据打印出的信息，跟栈分析该接口的请求头。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//acs.m.taobao.com/gw/mtop.damai.wireless.discovery.detail.get/1.4/?source=10101&amp;version=6000168&amp;type=originaljson&amp;data=%7B%22contentId%22%3A%2211088650%22%2C%22appType%22%3A%221%22%2C%22source%22%3A%2210101%22%2C%22osType%22%3A%222%22%2C%22pageSize%22%3A%2230%22%2C%22pageIndex%22%3A%221%22%2C%22version%22%3A%226000168%22%2C%22channel_from%22%3A%22damai_market%22%7D&amp;appType=1&amp;osType=2&amp;channel_from=damai_market</span></span><br><span class="line">java.lang.Exception</span><br><span class="line">        at java.net.URL.&lt;init&gt;(Native Method)</span><br><span class="line">        at tb.yy0.m(Taobao:<span class="number">1</span>)</span><br><span class="line">        at anet.channel.request.a.p(Taobao:<span class="number">2</span>)</span><br><span class="line">        at anet.channel.session.TnetSpdySession.w(Taobao:<span class="number">18</span>)</span><br><span class="line">        at anetwork.channel.unified.NetworkTask.sendRequest(Taobao:<span class="number">6</span>)</span><br><span class="line">        at anetwork.channel.unified.NetworkTask.run(Taobao:<span class="number">44</span>)</span><br><span class="line">        at anetwork.channel.unified.UnifiedRequestTask$a.proceed(Taobao:<span class="number">15</span>)</span><br><span class="line">        at com.taobao.orange.sync.NetworkInterceptor.intercept(Taobao:<span class="number">30</span>)</span><br><span class="line">        at anetwork.channel.unified.UnifiedRequestTask$a.proceed(Taobao:<span class="number">7</span>)</span><br><span class="line">        at anetwork.channel.unified.UnifiedRequestTask$<span class="number">3.</span>run(Taobao:<span class="number">2</span>)</span><br><span class="line">        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:<span class="number">428</span>)</span><br><span class="line">        at java.util.concurrent.FutureTask.run(FutureTask.java:<span class="number">237</span>)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:<span class="number">1133</span>)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:<span class="number">607</span>)</span><br><span class="line">        at java.lang.Thread.run(Thread.java:<span class="number">761</span>)</span><br></pre></td></tr></table></figure>

<p>4、使用Jadx打开某麦网apk</p>
<p>从at tb.yy0.m(Taobao:1)跟栈分析</p>
<p><img src="/2024/05/27/Android-Reverse-Frida-Hook/1.png" alt="image"></p>
<p> 根据调用栈往上走，定位到如下位置，注意这行代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALog.f(<span class="string">&quot;awcn.TnetSpdySession&quot;</span>, <span class="string">&quot;&quot;</span>, aVar.n(), <span class="string">&quot;request headers&quot;</span>, aVar.g());</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/27/Android-Reverse-Frida-Hook/2.png" alt="image"></p>
<p>代码注释很清楚了 request headers，我们跟进 hook aVar.g() 这个方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title function_">g</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Collections.unmodifiableMap(<span class="built_in">this</span>.f);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>hook之，对象输出可以使用 JSONObject转一下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">JSONObject</span> <span class="operator">=</span> Java.use(<span class="string">&quot;com.alibaba.fastjson.JSONObject&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hook6</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="title class_">JSON</span><span class="built_in">Object</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;com.alibaba.fastjson.JSONObject&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> a = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;anet.channel.request.a&quot;</span>);</span><br><span class="line">    a[<span class="string">&quot;g&quot;</span>].<span class="property">implementation</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> result = <span class="variable language_">this</span>[<span class="string">&quot;g&quot;</span>]();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result : &quot;</span> + <span class="title class_">JSON</span><span class="built_in">Object</span>.<span class="title function_">toJSON</span>(result).<span class="title function_">toString</span>());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打印出如下内容：</p>
<p><img src="/2024/05/27/Android-Reverse-Frida-Hook/3.png" alt="image"></p>
<p>请求 URL、 请求方法这边都写得很清楚啦。</p>
<p><img src="/2024/05/27/Android-Reverse-Frida-Hook/4.png" alt="image"></p>
<p>收工！</p>
</blockquote>


        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Android/" rel="tag">Android</a><a class="tag-none-link" href="/tags/Frida/" rel="tag">Frida</a><a class="tag-none-link" href="/tags/Hook/" rel="tag">Hook</a><a class="tag-none-link" href="/tags/Reprint/" rel="tag">Reprint</a>
            </div>
        

    </section>
</article>
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/05/27/Android-Reverse-Base/">
                安卓逆向 - 基础入门教程
            </a>
        </h2>
    
    <time>
        May 27, 2024
    </time>
    <section class="content">
        <h1><span id="安卓逆向-基础入门教程">安卓逆向 - 基础入门教程</span></h1><blockquote>
<p>本文转自<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42840266/article/details/132080000">小馒头yy</a> 并作补充</p>
</blockquote>
<h2><span id="一-引言">一、引言</span></h2><blockquote>
<p>1、我们在采集app数据时，有些字段是加密的，如某麦网x-mini-wua x-sgext x-sign x-umt x-utdid等参数，这时候我们需要去分析加密字段的生成。本篇将以采集的角度讲解入门安卓逆向需要掌握的技能、工具。</p>
<p>2、安卓（Android）是一种基于Linux内核操作系统，架构图（了解即可）</p>
<p><img src="/2024/05/27/Android-Reverse-Base/1.png" alt="image"></p>
<p>3、安卓应用程序使用JAVA语言编写（重要），作为一名安卓逆向人员我们必须掌握Java语言基础（基本语法、类、接口、面向对象、网络类库、加密解密等等）</p>
<p>4、安卓逆向是对已经打包好的APP进行反编译，分析源码了解应用逻辑的一门技术，这一部分我们需要学习静态分析，动态分析。各种反编译工具（推荐 jadx），Frida Hook。</p>
</blockquote>
<h2><span id="二-静态分析学习jadx反编译">二、静态分析，学习jadx反编译</span></h2><blockquote>
<p>1、安装jadx，github地址： <a target="_blank" rel="noopener" href="https://github.com/skylot/jadx/releases?page=1">Releases · skylot&#x2F;jadx · GitHub</a>，下载 <a target="_blank" rel="noopener" href="https://github.com/skylot/jadx/releases/download/v1.4.7/jadx-1.4.7.zip">jadx-1.4.7.zip</a> 解压即可。</p>
<p><img src="/2024/05/27/Android-Reverse-Base/2.png" alt="image"></p>
<p>2、调整jadx最大内存，打开bin目录下的 jadx-gui.bat文件，搜索DEFAULT_JVM_OPTS。</p>
<p>将 -XX:MaxRAMPercentage&#x3D;70.0 修改成 -Xmx16g </p>
<p><img src="/2024/05/27/Android-Reverse-Base/3.png" alt="image"></p>
<p>3、jadx使用，打开apk，jadx会自动反编译apk</p>
<p><img src="/2024/05/27/Android-Reverse-Base/4.png" alt="image"></p>
<p>全局搜索：点击左上角的导航 - 文本搜索，输入关键字，并且下方可以筛选检索的位置</p>
<p><img src="/2024/05/27/Android-Reverse-Base/5.png" alt="image"></p>
<p>根据关键字定位到关键代码后，我们就可以进行分析加密参数的生成啦。</p>
</blockquote>
<h2><span id="三-动态分析frida-初使用">三、动态分析，Frida 初使用</span></h2><blockquote>
<p>1、安装 adb （Android Debug Bridge），通过命令行使用adb，对安卓设备进行操作</p>
<p>2、下载模拟器，我使用的逍遥模拟器 （有Root好的真机更棒）</p>
<p>模拟器启动后，在命令行依次执行命令：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb forward tcp:<span class="number">27043</span> tcp:<span class="number">27043</span></span><br><span class="line">adb forward tcp:<span class="number">27042</span> tcp:<span class="number">27042</span></span><br><span class="line">adb connect <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">21503</span></span><br><span class="line">adb devices</span><br></pre></td></tr></table></figure>

<p>再执行 adb shell，即可进入模拟器， #字符代表已 Root </p>
<p><img src="/2024/05/27/Android-Reverse-Base/6.png" alt="image"></p>
<p>3、安装Frida</p>
<p>本地直接使用 pip install frida 命令安装 （需有Python环境）</p>
<p>模拟器（手机）端下载对应的Frida-server: Releases · frida&#x2F;frida · GitHub</p>
<p>低版本安卓推荐下载：12.8.13，高版本安卓直接下载最新版</p>
<p>模拟器是 x86架构，真机是 arm架构，请下载对应的 frida-server</p>
<p>4、开启Hook，动态分析应用运行时数据</p>
<ul>
<li>将frida-server传到手机 &#x2F;data&#x2F;local&#x2F;tmp 目录，转到本地frida-server存放的目录，依次执行以下命令</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">adb push frida-server-12.8.13-android-x86 /data/local/tmp</span><br><span class="line">adb shell</span><br><span class="line"><span class="built_in">cd</span> /data/local/tmp</span><br><span class="line"><span class="built_in">chmod</span> 777 frida-server-12.8.13-android-x86</span><br><span class="line">./frida-server-12.8.13-android-x86</span><br></pre></td></tr></table></figure>

<ul>
<li>编写 hook脚本，使用js方式启动，本例为 hook URL的构造方法：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hook1</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable constant_">URL</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&#x27;java.net.URL&#x27;</span>);</span><br><span class="line">    <span class="variable constant_">URL</span>.<span class="property">$init</span>.<span class="title function_">overload</span>(<span class="string">&#x27;java.lang.String&#x27;</span>).<span class="property">implementation</span>= <span class="keyword">function</span>(<span class="params">a</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;加密前：&#x27;</span>+a)               </span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;                    &#x27;</span>)</span><br><span class="line">            <span class="variable language_">this</span>.$init(a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title class_">Java</span>.<span class="title function_">perform</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">hook</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="title function_">setImmediate</span>(main);</span><br></pre></td></tr></table></figure>

<ul>
<li>开始 hook，注意高版本 frida不需要带 –no-pause</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frida -U -l dm_hook.js -f cn.damai --no-pause</span><br></pre></td></tr></table></figure>

<p>其中 dm_hook.js是 hook脚本的文件名，cn.damai是apk的包名。</p>
<p>滑动应用，正常打印出 url信息。</p>
</blockquote>


        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Android/" rel="tag">Android</a><a class="tag-none-link" href="/tags/Frida/" rel="tag">Frida</a><a class="tag-none-link" href="/tags/Jadx/" rel="tag">Jadx</a><a class="tag-none-link" href="/tags/Reprint/" rel="tag">Reprint</a>
            </div>
        

    </section>
</article>
  
    <article class="post ">

    
        <h2 class="title">
            <a href="/2024/05/27/Brida-How-To-Using/">
                Burpsuite插件-Brida
            </a>
        </h2>
    
    <time>
        May 27, 2024
    </time>
    <section class="content">
        <h1><span id="burpsuite插件-brida">Burpsuite插件-Brida</span></h1><blockquote>
<p>本文转自<a target="_blank" rel="noopener" href="https://blog.csdn.net/samlirongsheng/article/details/134966158">sam.li</a> 并作补充</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/samlirongsheng/article/details/134950536">通过一道CTF题目来认识一下Frida</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/samlirongsheng/article/details/134952350">objection</a><br>前面两篇通过对<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Frida&spm=1001.2101.3001.7020">Frida</a>的了解，以及利用objection来分析，这篇来了解一下分析后实际利用，以及通过实现插件自动化的方式来利用。</p>
</blockquote>
<h2><span id="brida介绍">Brida介绍</span></h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/federicodotta/Brida">https://github.com/federicodotta/Brida</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/federicodotta/Brida/wiki/Brida-components">Brida components</a></p>
<p><img src="/2024/05/27/Brida-How-To-Using/1.png" alt="image"></p>
<h3><span id="官方使用文档翻译">官方使用文档翻译</span></h3><p>时间记录，20230725；</p>
<p>测试版本：0.5</p>
<p>虽然说官方文档是最新的，但是使用文档的截图依旧跟新版本的插件不一致，然后能够查到的资料也是比较久的内容，不过大体功能是差不多，但是还是自己操作一遍后记录一下相关问题；</p>
<p>这里只记录自己测试的环境，其他环境参考官方文档；</p>
<h4><span id="android">Android</span></h4><ol>
<li>安装frida和其server，并启动具体可以参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/samlirongsheng/article/details/134950536">通过一道CTF题目来认识一下Frida</a></li>
<li>配置brida</li>
</ol>
<p>在配置之前先简单了解一下brida的UI及其功能；</p>
<p><img src="/2024/05/27/Brida-How-To-Using/2.png" alt="image"></p>
<h4><span id="1-主面板">1 主面板</span></h4><p>这里包含所有brida工具和配置</p>
<ol>
<li>Configurations</li>
<li>JS Editor</li>
<li>Hooks and functions</li>
<li>Graphical analysis</li>
<li>Graphical hooks</li>
<li>Custom plugins</li>
<li>Generate stubs</li>
<li>Debug export</li>
</ol>
<h4><span id="2-brida按钮面板">2 brida按钮面板</span></h4><p>Brida按钮面板由三个不同的部分组成：</p>
<ul>
<li>顶部（前两行）是 Pyro4 服务器的状态（启动&#x2F;停止）和应用程序的状态（hook状态）</li>
<li>（在两条黄线上方的按钮）在中间有一组固定在Brida所有选项卡上的按钮。这些按钮用于执行常规任务，如启动&#x2F;停止 Pyro4 服务器、生成&#x2F;附加&#x2F;停止&#x2F;分离应用程序（使用 frida-compile 编译）、重新加载 JS 文件、编译重新加载JS、分离所有hook、清除log等。</li>
<li>（黄线下）底部有一组按钮，取决于特定的Brida子选项卡</li>
</ul>
<h4><span id="3-brida控制台">3 brida控制台</span></h4><p>log输出</p>
</blockquote>
<h2><span id="brida工具介绍">brida工具介绍</span></h2><blockquote>
<h3><span id="configurations">Configurations</span></h3><p>配置界面</p>
<p>从上往下依次是</p>
<ol>
<li>Pyro服务状态</li>
<li>应用状态</li>
<li>是否使用虚拟的python环境</li>
<li>python可以执行文件的路径</li>
<li>Pyro服务地址（默认）</li>
<li>Pyro端口（默认）</li>
<li>frida-complile可以执行文件的路径</li>
<li>是否使用旧版本的frida-complile，尽量使用10以下的版本，一开始用默认版本会出现问题，hook上了，但是总有奇怪的报错</li>
<li>包含所有Brida JS文件的文件夹，第一次需要先生成一下默认的JS文件</li>
<li>需要hook的应用名&#x2F;PID，如果为应用名，则在连接的时候是点按钮面板的Spawn application，如果为PID，则Attach；</li>
<li>Frida连接方式</li>
<li>如果配置是远程连接frida，需要配置对应的地址和端口；</li>
</ol>
<p><img src="/2024/05/27/Brida-How-To-Using/3.png" alt="image"></p>
<h3><span id="js-editor">JS Editor</span></h3><p><img src="/2024/05/27/Brida-How-To-Using/4.png" alt="image"></p>
<p>集成到Burp Suite中的JS编辑器，以便能够编辑Brida JS文件并直接从Burp Suite添加自定义hook和导出函数。编辑器具有JS语法突出显示。</p>
<h3><span id="hooks-and-functions">Hooks and functions</span></h3><p><img src="/2024/05/27/Brida-How-To-Using/5.png" alt="image"></p>
<p>此选项卡包括许多默认hooks和方法，可以通过按钮启用&#x2F;执行。这些Frida脚本包括最新的Android和iOS平台的hook能力，以绕过和检查安全功能。</p>
<h3><span id="graphical-analysis">Graphical analysis</span></h3><p><img src="/2024/05/27/Brida-How-To-Using/6.png" alt="image"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/federicodotta/Brida/wiki/Graphical-analysis">Graphical analysis</a></p>
<p>这里功能类似于objection的能力集成进来：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">load tree = android hooking list classes //展示所有class </span><br><span class="line"></span><br><span class="line">搜索 = android hooking search methods [search_name] //在内存中所有已加载的方法中搜索包含特定关键词的方法</span><br><span class="line">//但是这里Android的用起来会导致应用闪退，官方提了这个，只有iOS支持；</span><br><span class="line"></span><br><span class="line">双击对应的class = android hooking watch class com.xxx.xxx //hook指定类, 会打印该类下的所以调用</span><br><span class="line">右键Inspect = android hooking watch class_method com.xxx.xxx.methodName --dump-args --dump-backtrace --dump-return //hook指定类, 会打印该类下的所以调用</span><br><span class="line">右键change return vule = android hooking set return_value com.xxx.xxx.methodName false //设置返回值</span><br></pre></td></tr></table></figure>

<h4><span id="实际使用">实际使用</span></h4><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/samlirongsheng/article/details/134950536">通过一道CTF题目来认识一下Frida</a></p>
<p>对函数进行打印，然后替换返回值，但是这里官方提供的返回值没有byte</p>
<p><img src="/2024/05/27/Brida-How-To-Using/7.png" alt="image"></p>
<h3><span id="graphical-hooks">Graphical hooks</span></h3><p><img src="/2024/05/27/Brida-How-To-Using/8.png" alt="image"></p>
<p>管理之前hook的所有内容；</p>
<h3><span id="custom-plugins">Custom plugins</span></h3><p><img src="/2024/05/27/Brida-How-To-Using/9.png" alt="image"></p>
<p>强大的功能；</p>
<p>可以理解成自定义生成burpsuite插件，有四种可自定义插件类型；</p>
<ul>
<li>IHttpListener：能让所有请求，通过正则匹配去替换&#x2F;修改指定的内容，并让这个匹配到的内容通过frida构造的hook脚本处理（加解密、重新生成sign等）</li>
<li>IMessageEditorTab：将自定义选项卡添加到Burp Suite请求&#x2F;响应窗格，以便能够使用Frida导出的函数解密&#x2F;解码&#x2F;处理请求&#x2F;响应（或其中的一部分）（然后加密&#x2F;编码&#x2F;处理修改并替换原始请求&#x2F;响应，如果有）</li>
<li>IContextMenu：将自定义上下文菜单选项添加到Burp Suite的右键菜单中，用于在请求和响应（或其中的一部分）上调用Frida导出的函数</li>
<li>JButton：添加调用&#x2F;启用 Frida 导出函数的按钮</li>
</ul>
<h3><span id="generate-stubs">Generate stubs</span></h3><p><img src="/2024/05/27/Brida-How-To-Using/10.png" alt="image"></p>
<p>如果内部自定义插件引擎无法解决复杂情况，则可以从外部Burp Suite插件使用Brida引擎。此选项卡生成 Java 和 Python 存根，可以复制并粘贴到外部插件中，以便允许 Burp Suite 和 Frida 使用 Brida 进行通信。</p>
<h3><span id="debug-export">Debug export</span></h3><p><img src="/2024/05/27/Brida-How-To-Using/11.png" alt="image"></p>
<p>此选项卡可用于在 Brida 插件中使用 Frida 导出的函数之前对其进行调试。为了使用 Brida 自定义插件（或使用 Brida 的外部插件），有必要将 Frida 代码放入一些由插件调用的 Frida 导出函数中。在此选项卡中，可以直接调用 Frida 导出，以便轻松调试。</p>
</blockquote>
<h2><span id="使用问题记录">使用问题记录</span></h2><blockquote>
<p>Windows环境</p>
<p><strong>Spawn&#x2F;Attach application时报错：entrypoint must be inside the project root</strong><br><a target="_blank" rel="noopener" href="https://cn-sec.com/archives/1639064.html">【移动安全】Frida + Burp -&gt; Brida | APP加解密 | CN-SEC 中文网</a></p>
<p>把Frida的js文件放到burpsuite应用的目录下；</p>
<p><strong>在Debug export中Run export是报错[frida.core.RPCException] unable to find method ‘test’</strong><br>排查了很久，只找到了frida-compile版本过高这种情况，只能测试一下低版本是否会有问题，用npm在burpsuite应用的目录下执行npm install <a href="mailto:&#x66;&#x72;&#x69;&#x64;&#x61;&#x2d;&#x63;&#x6f;&#109;&#x70;&#x69;&#108;&#x65;&#x40;&#57;&#x2e;&#x35;&#46;&#50;">&#x66;&#x72;&#x69;&#x64;&#x61;&#x2d;&#x63;&#x6f;&#109;&#x70;&#x69;&#108;&#x65;&#x40;&#57;&#x2e;&#x35;&#46;&#50;</a>，然后将安装的目录配置到frida-compile path中就能解决；</p>
<p><strong>使用了低版本的frida-compile后报错java.io.IOException: Cannot run program</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;C:\AAAA\agent\BurpSuiteCommunity\node_modules\.bin\frida-compile&quot;: </span><br><span class="line">CreateProcess error=<span class="number">193</span>, %<span class="number">1</span> 不是有效的 Win32 应用程序。</span><br></pre></td></tr></table></figure>

<p>一开始配置没有带.cmd</p>
<p><img src="/2024/05/27/Brida-How-To-Using/12.png" alt="image"></p>
<p><img src="/2024/05/27/Brida-How-To-Using/13.png" alt="image"></p>
<p><img src="/2024/05/27/Brida-How-To-Using/14.png" alt="image"></p>
<p><strong>UnicodeEncodeError: ‘gbk’ codec can’t encode</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">character <span class="string">&#x27;\u03f1&#x27;</span> <span class="keyword">in</span> position 49: illegal multibyte sequence**</span><br></pre></td></tr></table></figure>

<p>刚好遇到一个反编译后用中文混淆的，这里用objection和python执行相关处理的时候就会报编码错误，在对应路径相关代码输出处加上utf-8编码输出就能解决；然后objection需要修改后重新编译；</p>
<p><img src="/2024/05/27/Brida-How-To-Using/15.png" alt="image"></p>
</blockquote>
<h2><span id="源码解析">源码解析</span></h2><blockquote>
<p>java调用python脚本</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> frida</span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"><span class="keyword">import</span> Pyro4</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment">#reload(sys)   </span></span><br><span class="line"><span class="comment">#sys.setdefaultencoding(&#x27;utf-8&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Unbuffered</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, stream</span>):</span><br><span class="line">       self.stream = stream</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">write</span>(<span class="params">self, data</span>):</span><br><span class="line">       self.stream.write(data)</span><br><span class="line">       self.stream.flush()</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">writelines</span>(<span class="params">self, datas</span>):</span><br><span class="line">       self.stream.writelines(datas)</span><br><span class="line">       self.stream.flush()</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__getattr__</span>(<span class="params">self, attr</span>):</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">getattr</span>(self.stream, attr)</span><br><span class="line"></span><br><span class="line"><span class="meta">@Pyro4.expose</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BridaServicePyro</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, daemon</span>):</span><br><span class="line">        self.daemon = daemon</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">attach_application</span>(<span class="params">self,pid,frida_script,device,host_port_device_id</span>):</span><br><span class="line"></span><br><span class="line">        self.frida_script = frida_script</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pid.isnumeric():</span><br><span class="line">            self.pid = <span class="built_in">int</span>(pid)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.pid = pid</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> device == <span class="string">&#x27;remote&#x27;</span>:</span><br><span class="line">            self.device = frida.get_remote_device()</span><br><span class="line">        <span class="keyword">elif</span> device == <span class="string">&#x27;usb&#x27;</span>:</span><br><span class="line">            self.device = frida.get_usb_device()</span><br><span class="line">        <span class="keyword">elif</span> device == <span class="string">&#x27;local&#x27;</span>:</span><br><span class="line">            self.device = frida.get_local_device()</span><br><span class="line">        <span class="keyword">elif</span> device == <span class="string">&#x27;device&#x27;</span>:</span><br><span class="line">            self.device = frida.get_device(host_port_device_id)        </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.device = frida.get_device_manager().add_remote_device(host_port_device_id)</span><br><span class="line"></span><br><span class="line">        self.session = self.device.attach(self.pid)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> codecs.<span class="built_in">open</span>(self.frida_script, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            source = f.read()</span><br><span class="line"></span><br><span class="line">        self.script = self.session.create_script(source)</span><br><span class="line">        self.script.load()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">spawn_application</span>(<span class="params">self,application_id,frida_script,device,host_port_device_id</span>):</span><br><span class="line"></span><br><span class="line">        self.application_id = application_id</span><br><span class="line">        self.frida_script = frida_script</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> device == <span class="string">&#x27;remote&#x27;</span>:</span><br><span class="line">            self.device = frida.get_remote_device()</span><br><span class="line">        <span class="keyword">elif</span> device == <span class="string">&#x27;usb&#x27;</span>:</span><br><span class="line">            self.device = frida.get_usb_device()</span><br><span class="line">        <span class="keyword">elif</span> device == <span class="string">&#x27;local&#x27;</span>:</span><br><span class="line">            self.device = frida.get_local_device()</span><br><span class="line">        <span class="keyword">elif</span> device == <span class="string">&#x27;device&#x27;</span>:</span><br><span class="line">            self.device = frida.get_device(host_port_device_id)        </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.device = frida.get_device_manager().add_remote_device(host_port_device_id)</span><br><span class="line"></span><br><span class="line">        self.pid = self.device.spawn([self.application_id])</span><br><span class="line"></span><br><span class="line">        self.session = self.device.attach(self.pid)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> codecs.<span class="built_in">open</span>(self.frida_script, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            source = f.read()</span><br><span class="line"></span><br><span class="line">        self.script = self.session.create_script(source)</span><br><span class="line">        self.script.load()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">resume_application</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        self.device.resume(self.pid)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reload_script</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> codecs.<span class="built_in">open</span>(self.frida_script, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            source = f.read()</span><br><span class="line"></span><br><span class="line">        self.script = self.session.create_script(source)</span><br><span class="line">        self.script.load()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">disconnect_application</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        self.device.kill(self.pid)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">detach_application</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        self.session.detach()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">callexportfunction</span>(<span class="params">self, methodName, args</span>):</span><br><span class="line">        method_to_call = <span class="built_in">getattr</span>(self.script.exports, methodName)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Take the Java list passed as argument and create a new variable list of argument</span></span><br><span class="line">        <span class="comment"># (necessary for bridge Python - Java, I think)</span></span><br><span class="line">        s = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> args:</span><br><span class="line">            s.append(i)</span><br><span class="line"></span><br><span class="line">        return_value = method_to_call(*s)</span><br><span class="line">        <span class="keyword">return</span> return_value</span><br><span class="line"></span><br><span class="line"><span class="meta">    @Pyro4.oneway</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">shutdown</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;shutting down...&#x27;</span>)</span><br><span class="line">        self.daemon.shutdown()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable python buffering (cause issues when communicating with Java...)</span></span><br><span class="line">sys.stdout = Unbuffered(sys.stdout)</span><br><span class="line">sys.stderr = Unbuffered(sys.stderr)</span><br><span class="line"></span><br><span class="line">host = sys.argv[<span class="number">1</span>]</span><br><span class="line">port = <span class="built_in">int</span>(sys.argv[<span class="number">2</span>])</span><br><span class="line">daemon = Pyro4.Daemon(host=host,port=port)</span><br><span class="line"></span><br><span class="line"><span class="comment">#daemon = Pyro4.Daemon(host=&#x27;127.0.0.1&#x27;,port=9999)</span></span><br><span class="line">bs = BridaServicePyro(daemon)</span><br><span class="line">uri = daemon.register(bs,objectId=<span class="string">&#x27;BridaServicePyro&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Ready.&quot;</span>)</span><br><span class="line">daemon.requestLoop()</span><br></pre></td></tr></table></figure>



        

        
            <div class="tags">
                <a class="tag-none-link" href="/tags/Brida/" rel="tag">Brida</a><a class="tag-none-link" href="/tags/Burpsuite/" rel="tag">Burpsuite</a><a class="tag-none-link" href="/tags/Hook/" rel="tag">Hook</a><a class="tag-none-link" href="/tags/Reprint/" rel="tag">Reprint</a>
            </div>
        

    </section>
</article>
  
</section>


  <nav id="page-nav" class="clearfix">
    
    
    <a class="next" rel="next" href="/archives/2024/page/2/">
      <span class="text">Next</span>
      <span class="icon icon-chevron-right"></span>
    </a>
    
  </nav>


        <script>setLoadingBarProgress(60);</script>
    </main>

    <footer id="footer" class="clearfix">

    

    <div class="social-wrapper">
        
            
                <a href="https://github.com/szczecin" class="social github"
                   target="_blank" rel="external">
                    <span class="icon icon-github"></span>
                </a>
            
                <a href="/atom.xml" class="social rss"
                   target="_blank" rel="external">
                    <span class="icon icon-rss"></span>
                </a>
            
        
    </div>

    <div class="theme-by">Theme <span class="codename">Memory</span> designed by <a href="https://artifact.me/"
                                                                                    target="_blank">Art Chen</a>.
    </div>
    <div>&copy; <a href="/">氕氘氚</a></div>

</footer>


    <script>setLoadingBarProgress(80);</script>
    <div class="overlay"></div>
</div>

<div class="site-sidebar" id="site-sidebar">

    

    <div class="sidebar-switch clearfix "
         style="display: none">
        <a class="dark-btn active" data-toggle="toc">
            <span class="icon icon-list"></span>
            <span class="text">Index</span>
        </a>
        <a class="dark-btn" data-toggle="bio">
            <span class="icon icon-person"></span>
            <span class="text">Bio</span>
        </a>
    </div>

    <div class="site-toc "
         style="display: none">
        
            <div class="no-index">No Index</div>
        
    </div>

    <div class="site-bio show"
         style="display: block">

        <div class="about-me clearfix">
            <div class="avatar">
                <img src="/img/avatar.png"/>
            </div>
            <div class="info">
                <a class="name dark-btn" href="/about">
                    Szczecin
                </a>
            </div>
            <div class="info">
                <span class="item desc">
                    Open your eyes to see the light in life
                </span>
            </div>
        </div>

        <div class="menu section">
            <ul class="clearfix">
                
                    <li class="left">
                        <a href="/about"
                           onfocus="this.blur();"
                           class="nav-about dark-btn block">
                            简介
                        </a>
                    </li>
                
                    <li class="right">
                        <a href="/archives"
                           onfocus="this.blur();"
                           class="nav-archives dark-btn block">
                            归档
                        </a>
                    </li>
                
                    <li class="left">
                        <a href="/categories"
                           onfocus="this.blur();"
                           class="nav-categories dark-btn block">
                            分类
                        </a>
                    </li>
                
                    <li class="right">
                        <a href="/tags"
                           onfocus="this.blur();"
                           class="nav-tags dark-btn block">
                            TAGs
                        </a>
                    </li>
                
                    <li class="left">
                        <a href="/WriteUP"
                           onfocus="this.blur();"
                           class="nav-WriteUP dark-btn block">
                            WriteUP
                        </a>
                    </li>
                
                    <li class="right">
                        <a href="/EXP"
                           onfocus="this.blur();"
                           class="nav-EXP dark-btn block">
                            EXP
                        </a>
                    </li>
                
                    <li class="left">
                        <a href="/tags/SRC"
                           onfocus="this.blur();"
                           class="nav-SRC dark-btn block">
                            SRC
                        </a>
                    </li>
                
                    <li class="right">
                        <a href="/Life"
                           onfocus="this.blur();"
                           class="nav-Life dark-btn block">
                            Life
                        </a>
                    </li>
                
            </ul>
        </div>

    </div>

    <div class="shortcuts">
        <a href="#header" class="top window-nav dark-btn" id="go-top">
            <span class="icon icon-chevron-thin-up"></span>
        </a>
        <a class="close dark-btn" id="sidebar-close">
            <span class="icon icon-close"></span>
        </a>
        <a href="#footer" class="top window-nav dark-btn" id="go-bottom">
            <span class="icon icon-chevron-thin-down"></span>
        </a>
    </div>

</div>





<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>


<script src="/js/jquery.fitvids.js"></script>

<script>
  var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
  var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
  var ALGOLIA_API_KEY = "";
  var ALGOLIA_APP_ID = "";
  var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var SEARCH_SERVICE = "";
  var universalSearchConfig = {};
  if (SEARCH_SERVICE === 'google') {
    universalSearchConfig = {
      searchService: SEARCH_SERVICE,
      apiKey: GOOGLE_CUSTOM_SEARCH_API_KEY,
      engineId: GOOGLE_CUSTOM_SEARCH_ENGINE_ID,
      imagePath: "/img/"
    };
  } else if (SEARCH_SERVICE === 'algolia') {
    universalSearchConfig = {
      searchService: SEARCH_SERVICE,
      apiKey: ALGOLIA_API_KEY,
      appId: ALGOLIA_APP_ID,
      indexName: ALGOLIA_INDEX_NAME,
      imagePath: "/img/"
    };
  } else if (SEARCH_SERVICE === 'azure') {
    universalSearchConfig = {
      searchService: SEARCH_SERVICE,
      serviceName: AZURE_SERVICE_NAME,
      indexName: AZURE_INDEX_NAME,
      apiKey: AZURE_QUERY_KEY,
      imagePath: "/img/"
    };
  }
</script>

<script src="/js/app.js"></script>


<script src="/js/search.js"></script>





<script>setLoadingBarProgress(100);</script>

</body>
</html>
